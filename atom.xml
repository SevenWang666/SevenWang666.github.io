<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>xincheng</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-11-08T16:15:04.548Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>xincheng</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>mobxæ–‡æ¡£</title>
    <link href="http://example.com/2021/11/01/MobX%E6%96%87%E6%A1%A3/"/>
    <id>http://example.com/2021/11/01/MobX%E6%96%87%E6%A1%A3/</id>
    <published>2021-11-01T00:00:00.000Z</published>
    <updated>2021-11-08T16:15:04.548Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MobXæ–‡æ¡£"><a href="#MobXæ–‡æ¡£" class="headerlink" title="MobXæ–‡æ¡£"></a>MobXæ–‡æ¡£</h1><h2 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h2><ol><li><p><a href="https://cn.mobx.js.org/">mobxä¸­æ–‡æ–‡æ¡£</a></p></li><li><p><a href="https://github.com/mobxjs/mobx">mobxæºç åœ°å€</a></p></li><li><p><a href="https://mobx-react.js.org/">mobx-react-liteè‹±æ–‡æ–‡æ¡£ï¼ˆæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°å®Œæ•´ç‰ˆçš„ä¸­æ–‡ç‰ˆæ–‡æ¡£ï¼‰</a></p></li><li><p><a href="https://github.com/mobxjs/mobx-react">mobx-reactæºç åœ°å€</a>(ä¸‹é¢çš„README.mdé‡Œæ˜¯å®Œæ•´ç‰ˆæœ¬çš„è‹±æ–‡æ–‡æ¡£)</p></li><li><p><a href="https://github.com/mobxjs/mobx-react-lite">mobx-react-liteæºç åœ°å€</a></p><p>â€‹    </p></li></ol><h2 id="å…³äºåº“"><a href="#å…³äºåº“" class="headerlink" title="å…³äºåº“"></a>å…³äºåº“</h2><p><strong>mobx</strong>ï¼šæä¾›observableã€actionã€computedç­‰APIçš„åº“ï¼Œç±»æ¯”reduxã€‚</p><p><strong>mobx-react</strong>ï¼šæä¾›Providerã€injectã€observerã€Observerã€useObserverã€useAsObservableSourceã€ useLocalStoreç­‰APIçš„åº“ã€‚æœ€æ–°ç‰ˆçš„mobx-reactä¸­åŒ…æ‹¬äº†mobx-react-liteã€‚</p><p><strong>mobx-react-lite</strong>ï¼šç›¸å½“äºæ˜¯mobx-reactçš„ç²¾ç®€ç‰ˆï¼Œä¸æ”¯æŒProviderã€injectï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥ä¾é React Contextè‡ªå·±å®ç°è¿™ä¸¤ä¸ªAPIçš„åŠŸèƒ½ã€‚</p><h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><h3 id="MobXç®€ä»‹"><a href="#MobXç®€ä»‹" class="headerlink" title="MobXç®€ä»‹"></a>MobXç®€ä»‹</h3><p>ç®€å•ã€å¯æ‰©å±•çš„çŠ¶æ€ç®¡ç†ã€‚</p><p>å®‰è£… <code>yarn add mobx </code></p><p>React ç»‘å®šåº“: <code>yarn add mobx-react</code></p><h3 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><pre><code> MobX å¯ä»¥é€šè¿‡ *decorate* å·¥å…·åœ¨ä¸æ”¯æŒè£…é¥°å™¨è¯­æ³•çš„æƒ…å†µåŠ ä½¿ç”¨ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œå¤šæ•° MobX ç”¨æˆ·æ›´å–œæ¬¢è£…é¥°å™¨è¯­æ³•ï¼Œå› ä¸ºå®ƒæ›´ç®€æ´ã€‚</code></pre><p>è£…é¥°å™¨å‚è€ƒ<a href="https://cn.mobx.js.org/best/decorators.html">https://cn.mobx.js.org/best/decorators.html</a></p><h3 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h3><p>MobXé€šè¿‡é€æ˜çš„å‡½æ•°å“åº”å¼ç¼–ç¨‹(transparently applying functional reactive programming - TFRP)ä½¿å¾—çŠ¶æ€ç®¡ç†å˜å¾—ç®€å•å’Œå¯æ‰©å±•ã€‚MobXèƒŒåçš„å“²å­¦å¾ˆç®€å•:</p><p><em>ä»»ä½•æºè‡ªåº”ç”¨çŠ¶æ€çš„ä¸œè¥¿éƒ½åº”è¯¥è‡ªåŠ¨åœ°è·å¾—ã€‚</em></p><p>å…¶ä¸­åŒ…æ‹¬UIã€æ•°æ®åºåˆ—åŒ–ã€æœåŠ¡å™¨é€šè®¯ï¼Œç­‰ç­‰ã€‚</p><p><img src="https://cn.mobx.js.org/flow.png" alt="MobX unidirectional flow"></p><p>React å’Œ MobX æ˜¯ä¸€å¯¹å¼ºåŠ›ç»„åˆã€‚React é€šè¿‡æä¾›æœºåˆ¶æŠŠåº”ç”¨çŠ¶æ€è½¬æ¢ä¸ºå¯æ¸²æŸ“ç»„ä»¶æ ‘å¹¶å¯¹å…¶è¿›è¡Œæ¸²æŸ“ã€‚è€ŒMobXæä¾›æœºåˆ¶æ¥å­˜å‚¨å’Œæ›´æ–°åº”ç”¨çŠ¶æ€ä¾› React ä½¿ç”¨ã€‚</p><p>å¯¹äºåº”ç”¨å¼€å‘ä¸­çš„å¸¸è§é—®é¢˜ï¼ŒReact å’Œ MobX éƒ½æä¾›äº†æœ€ä¼˜å’Œç‹¬ç‰¹çš„è§£å†³æ–¹æ¡ˆã€‚React æä¾›äº†ä¼˜åŒ–UIæ¸²æŸ“çš„æœºåˆ¶ï¼Œ è¿™ç§æœºåˆ¶å°±æ˜¯é€šè¿‡ä½¿ç”¨è™šæ‹ŸDOMæ¥å‡å°‘æ˜‚è´µçš„DOMå˜åŒ–çš„æ•°é‡ã€‚MobX æä¾›äº†ä¼˜åŒ–åº”ç”¨çŠ¶æ€ä¸ React ç»„ä»¶åŒæ­¥çš„æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶å°±æ˜¯ä½¿ç”¨å“åº”å¼è™šæ‹Ÿä¾èµ–çŠ¶æ€å›¾è¡¨ï¼Œå®ƒåªæœ‰åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰æ›´æ–°å¹¶ä¸”æ°¸è¿œä¿æŒæ˜¯æœ€æ–°çš„ã€‚</p><h3 id="lesson1-MobXè¦ç‚¹"><a href="#lesson1-MobXè¦ç‚¹" class="headerlink" title="lesson1-MobXè¦ç‚¹"></a>lesson1-MobXè¦ç‚¹</h3><h4 id="1-å®šä¹‰çŠ¶æ€å¹¶ä½¿å…¶å¯è§‚å¯Ÿ"><a href="#1-å®šä¹‰çŠ¶æ€å¹¶ä½¿å…¶å¯è§‚å¯Ÿ" class="headerlink" title="1. å®šä¹‰çŠ¶æ€å¹¶ä½¿å…¶å¯è§‚å¯Ÿ"></a>1. å®šä¹‰çŠ¶æ€å¹¶ä½¿å…¶å¯è§‚å¯Ÿ</h4><p>å¯ä»¥ç”¨ä»»ä½•ä½ å–œæ¬¢çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨çŠ¶æ€ï¼Œå¦‚å¯¹è±¡ã€æ•°ç»„ã€ç±»ã€‚ å¾ªç¯æ•°æ®ç»“æ„ã€å¼•ç”¨ï¼Œéƒ½æ²¡æœ‰å…³ç³»ã€‚ åªè¦ç¡®ä¿æ‰€æœ‰ä¼šéšæ—¶é—´æµé€è€Œæ”¹å˜çš„å±æ€§æ‰“ä¸Š <code>mobx</code> çš„æ ‡è®°ä½¿å®ƒä»¬å˜å¾—å¯è§‚å¯Ÿå³å¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;observable&#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> appState = observable(&#123;</span><br><span class="line">    <span class="attr">timer</span>: <span class="number">0</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="2-åˆ›å»ºè§†å›¾ä»¥å“åº”çŠ¶æ€çš„å˜åŒ–"><a href="#2-åˆ›å»ºè§†å›¾ä»¥å“åº”çŠ¶æ€çš„å˜åŒ–" class="headerlink" title="2. åˆ›å»ºè§†å›¾ä»¥å“åº”çŠ¶æ€çš„å˜åŒ–"></a>2. åˆ›å»ºè§†å›¾ä»¥å“åº”çŠ¶æ€çš„å˜åŒ–</h4><p>æˆ‘ä»¬çš„ <code>appState</code> è¿˜æ²¡æœ‰è§‚å¯Ÿåˆ°ä»»ä½•çš„ä¸œè¥¿ã€‚ ä½ å¯ä»¥åˆ›å»ºè§†å›¾ï¼Œå½“ <code>appState</code> ä¸­ç›¸å…³æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶è§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ MobX ä¼šä»¥ä¸€ç§æœ€å°é™åº¦çš„æ–¹å¼æ¥æ›´æ–°è§†å›¾ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;observer&#125; <span class="keyword">from</span> <span class="string">&quot;mobx-react&quot;</span>;</span><br><span class="line"></span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimerView</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  onReset = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.props.appState.resetTimer();</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.onReset&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        Seconds passed: &#123;this.props.appState.timer&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TimerView;</span><br></pre></td></tr></table></figure><h4 id="3-æ›´æ”¹çŠ¶æ€"><a href="#3-æ›´æ”¹çŠ¶æ€" class="headerlink" title="3. æ›´æ”¹çŠ¶æ€"></a>3. æ›´æ”¹çŠ¶æ€</h4><p>ç¬¬ä¸‰ä»¶è¦åšçš„äº‹å°±æ˜¯æ›´æ”¹çŠ¶æ€ã€‚ ä¹Ÿå°±æ˜¯ä½ çš„åº”ç”¨ç©¶ç«Ÿè¦åšä»€ä¹ˆã€‚ ä¸åƒä¸€äº›å…¶å®ƒæ¡†æ¶ï¼ŒMobX ä¸ä¼šå‘½ä»¤ä½ å¦‚ä½•å¦‚ä½•å»åšã€‚ è¿™æ˜¯æœ€ä½³å®è·µï¼Œä½†å…³é”®è¦è®°ä½ä¸€ç‚¹: <strong>MobX å¸®åŠ©ä½ ä»¥ä¸€ç§ç®€å•ç›´è§‚çš„æ–¹å¼æ¥å®Œæˆå·¥ä½œ</strong>ã€‚</p><p>ä¸‹é¢çš„ä»£ç æ¯ç§’éƒ½ä¼šä¿®æ”¹ä½ çš„æ•°æ®ï¼Œè€Œå½“éœ€è¦çš„æ—¶å€™UIä¼šè‡ªåŠ¨æ›´æ–°ã€‚ æ— è®ºæ˜¯åœ¨<strong>æ”¹å˜</strong>çŠ¶æ€çš„æ§åˆ¶å™¨å‡½æ•°ä¸­ï¼Œè¿˜æ˜¯åœ¨åº”è¯¥<strong>æ›´æ–°</strong>çš„è§†å›¾ä¸­ï¼Œéƒ½æ²¡æœ‰æ˜ç¡®çš„å…³ç³»å®šä¹‰ã€‚ ä½¿ç”¨ <code>observable</code> æ¥è£…é¥°ä½ çš„<strong>çŠ¶æ€</strong>å’Œ<strong>è§†å›¾</strong>ï¼Œè¿™è¶³ä»¥è®© MobXæ£€æµ‹æ‰€æœ‰å…³ç³»äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">appState.resetTimer = action(<span class="function"><span class="keyword">function</span> <span class="title">reset</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    appState.timer = <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(action(<span class="function"><span class="keyword">function</span> <span class="title">tick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    appState.timer += <span class="number">1</span>;</span><br><span class="line">&#125;), <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>åªæœ‰åœ¨ä¸¥æ ¼æ¨¡å¼(é»˜è®¤æ˜¯ä¸å¯ç”¨)ä¸‹ä½¿ç”¨ MobX æ—¶æ‰éœ€è¦ <code>action</code> åŒ…è£…ã€‚ å»ºè®®ä½¿ç”¨ actionï¼Œå› ä¸ºå®ƒå°†å¸®åŠ©ä½ æ›´å¥½åœ°ç»„ç»‡åº”ç”¨ï¼Œå¹¶è¡¨è¾¾å‡ºä¸€ä¸ªå‡½æ•°ä¿®æ”¹çŠ¶æ€çš„æ„å›¾ã€‚ åŒæ—¶,å®ƒè¿˜è‡ªåŠ¨åº”ç”¨äº‹åŠ¡ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚</p><h3 id="lesson2-MobX-API-æ¦‚å¿µ"><a href="#lesson2-MobX-API-æ¦‚å¿µ" class="headerlink" title="lesson2-MobX API æ¦‚å¿µ"></a>lesson2-MobX API æ¦‚å¿µ</h3><h4 id="Observable-state-å¯è§‚å¯Ÿçš„çŠ¶æ€"><a href="#Observable-state-å¯è§‚å¯Ÿçš„çŠ¶æ€" class="headerlink" title="Observable state(å¯è§‚å¯Ÿçš„çŠ¶æ€)"></a>Observable state(å¯è§‚å¯Ÿçš„çŠ¶æ€)</h4><p>MobX ä¸ºç°æœ‰çš„æ•°æ®ç»“æ„(å¦‚å¯¹è±¡ï¼Œæ•°ç»„å’Œç±»å®ä¾‹)æ·»åŠ äº†å¯è§‚å¯Ÿçš„åŠŸèƒ½ã€‚ é€šè¿‡ä½¿ç”¨ <a href="http://cn.mobx.js.org/refguide/observable-decorator.html">@observable</a> è£…é¥°å™¨(ES.Next)æ¥ç»™ä½ çš„ç±»å±æ€§æ·»åŠ æ³¨è§£å°±å¯ä»¥ç®€å•åœ°å®Œæˆè¿™ä¸€åˆ‡ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;observable, computed&#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> </span>&#123;</span><br><span class="line">  @observable todos = [</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="string">&quot;0&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;ä»»åŠ¡0&quot;</span>, <span class="attr">finished</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="string">&quot;1&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;ä»»åŠ¡1&quot;</span>, <span class="attr">finished</span>: <span class="literal">false</span>&#125;</span><br><span class="line">  ];</span><br><span class="line">  @computed <span class="keyword">get</span> <span class="title">unfinishedTodoCount</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.finished).length;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Computed-values-è®¡ç®—å€¼"><a href="#Computed-values-è®¡ç®—å€¼" class="headerlink" title="Computed values(è®¡ç®—å€¼)"></a>Computed values(è®¡ç®—å€¼)</h4><p>å®šä¹‰åœ¨ç›¸å…³æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°çš„å€¼ã€‚å¦‚ä¸Šæ®µä»£ç ï¼Œå½“æ·»åŠ äº†ä¸€ä¸ªæ–°çš„todoæˆ–è€…æŸä¸ªtodoçš„ <code>finished</code> å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒMobX ä¼šç¡®ä¿ <code>unfinishedTodoCount</code> è‡ªåŠ¨æ›´æ–°ã€‚</p><h4 id="Reactions-ååº”"><a href="#Reactions-ååº”" class="headerlink" title="Reactions(ååº”)"></a>Reactions(ååº”)</h4><p>Reactions å’Œè®¡ç®—å€¼å¾ˆåƒï¼Œä½†å®ƒä¸æ˜¯äº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ï¼Œè€Œæ˜¯ä¼šäº§ç”Ÿä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚æ‰“å°åˆ°æ§åˆ¶å°ã€ç½‘ç»œè¯·æ±‚ã€é€’å¢åœ°æ›´æ–° React ç»„ä»¶æ ‘ä»¥ä¿®è¡¥DOMã€ç­‰ç­‰ã€‚</p><h5 id="React-ç»„ä»¶"><a href="#React-ç»„ä»¶" class="headerlink" title="React ç»„ä»¶"></a>React ç»„ä»¶</h5><p>å¦‚æœä½ ç”¨ React çš„è¯ï¼Œå¯ä»¥æŠŠä½ çš„(æ— çŠ¶æ€å‡½æ•°)ç»„ä»¶å˜æˆå“åº”å¼ç»„ä»¶ï¼Œæ–¹æ³•æ˜¯åœ¨ç»„ä»¶ä¸Šæ·»åŠ  <a href="http://cn.mobx.js.org/refguide/observable-decorator.html"><code>observer</code></a> å‡½æ•°/ è£…é¥°å™¨. <code>observer</code>ç”± <code>mobx-react</code> åŒ…æä¾›çš„ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;observer&#125; <span class="keyword">from</span> <span class="string">&quot;mobx-react&quot;</span>;</span><br><span class="line"></span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoListView</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;todos, unfinishedTodoCount&#125; = <span class="built_in">this</span>.props.todoList;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">          &#123;todos.map(todo =&gt; (</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">TodoView</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">          ))&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        Tasks left: &#123;unfinishedTodoCount&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoView = observer(<span class="function">(<span class="params">&#123;todo&#125;</span>) =&gt;</span></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">checked</span>=<span class="string">&#123;todo.finished&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> todo.finished = !todo.finished&#125;</span></span><br><span class="line"><span class="xml">        /&gt;&#123;todo.title&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> TodoList();</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">TodoListView</span> <span class="attr">todoList</span>=<span class="string">&#123;store&#125;</span> /&gt;</span></span>,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h5 id="è‡ªå®šä¹‰-reactions"><a href="#è‡ªå®šä¹‰-reactions" class="headerlink" title="è‡ªå®šä¹‰ reactions"></a>è‡ªå®šä¹‰ reactions</h5><p>ä½¿ç”¨<a href="http://cn.mobx.js.org/refguide/autorun.html"><code>autorun</code></a>ã€<a href="http://cn.mobx.js.org/refguide/reaction.html"><code>reaction</code></a> å’Œ <a href="http://cn.mobx.js.org/refguide/when.html"><code>when</code></a> å‡½æ•°å³å¯ç®€å•çš„åˆ›å»ºè‡ªå®šä¹‰ reactionsï¼Œä»¥æ»¡è¶³ä½ çš„å…·ä½“åœºæ™¯ã€‚</p><p>ä¾‹å¦‚ï¼Œæ¯å½“ <code>unfinishedTodoCount</code> çš„æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸‹é¢çš„ <code>autorun</code> ä¼šæ‰“å°æ—¥å¿—æ¶ˆæ¯:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">autorun(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Tasks left: &quot;</span> + todos.unfinishedTodoCount)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="MobX-ä¼šå¯¹ä»€ä¹ˆä½œå‡ºå“åº”"><a href="#MobX-ä¼šå¯¹ä»€ä¹ˆä½œå‡ºå“åº”" class="headerlink" title="MobX ä¼šå¯¹ä»€ä¹ˆä½œå‡ºå“åº”?"></a>MobX ä¼šå¯¹ä»€ä¹ˆä½œå‡ºå“åº”?</h5><p><em>MobX ä¼šå¯¹åœ¨æ‰§è¡Œè·Ÿè¸ªå‡½æ•°æœŸé—´è¯»å–çš„ä»»ä½•ç°æœ‰çš„å¯è§‚å¯Ÿå±æ€§åšå‡ºååº”</em>ã€‚</p><h4 id="Actions-åŠ¨ä½œ"><a href="#Actions-åŠ¨ä½œ" class="headerlink" title="Actions(åŠ¨ä½œ)"></a>Actions(åŠ¨ä½œ)</h4><p>ä»»ä½•åº”ç”¨éƒ½æœ‰åŠ¨ä½œã€‚åŠ¨ä½œæ˜¯ä»»ä½•ç”¨æ¥ä¿®æ”¹çŠ¶æ€çš„ä¸œè¥¿ã€‚</p><p>ä½¿ç”¨MobXä½ å¯ä»¥åœ¨ä»£ç ä¸­æ˜¾å¼åœ°æ ‡è®°å‡ºåŠ¨ä½œæ‰€åœ¨çš„ä½ç½®ã€‚ åŠ¨ä½œå¯ä»¥æœ‰åŠ©äºæ›´å¥½çš„ç»„ç»‡ä»£ç ã€‚ å»ºè®®åœ¨ä»»ä½•æ›´æ”¹ observable æˆ–è€…æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ä¸Šä½¿ç”¨åŠ¨ä½œã€‚ ç»“åˆå¼€å‘è€…å·¥å…·çš„è¯ï¼ŒåŠ¨ä½œè¿˜èƒ½æä¾›éå¸¸æœ‰ç”¨çš„è°ƒè¯•ä¿¡æ¯ã€‚ æ³¨æ„: å½“å¯ç”¨<strong>ä¸¥æ ¼æ¨¡å¼</strong>æ—¶ï¼Œéœ€è¦å¼ºåˆ¶ä½¿ç”¨ <code>action</code>ï¼Œå‚è§ <code>enforceActions</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;configure&#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å…è®¸åœ¨åŠ¨ä½œå¤–éƒ¨ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line">configure(&#123;<span class="attr">enforceActions</span>: <span class="string">&quot;observed&quot;</span>&#125;);</span><br></pre></td></tr></table></figure><h4 id="enforceActions"><a href="#enforceActions" class="headerlink" title="enforceActions"></a><code>enforceActions</code></h4><p>ä¹Ÿè¢«ç§°ä¸ºâ€œä¸¥æ ¼æ¨¡å¼â€ã€‚</p><p>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸å…è®¸åœ¨ <a href="https://cn.mobx.js.org/refguide/action.html"><code>action</code></a> å¤–æ›´æ”¹ä»»ä½•çŠ¶æ€ã€‚ å¯æ¥æ”¶çš„å€¼:</p><ul><li><code>&quot;never&quot;</code> (é»˜è®¤): å¯ä»¥åœ¨ä»»æ„åœ°æ–¹ä¿®æ”¹çŠ¶æ€</li><li><code>&quot;observed&quot;</code>: åœ¨æŸå¤„è§‚å¯Ÿåˆ°çš„æ‰€æœ‰çŠ¶æ€éƒ½éœ€è¦é€šè¿‡åŠ¨ä½œè¿›è¡Œæ›´æ”¹ã€‚åœ¨æ­£å¼åº”ç”¨ä¸­æ¨èæ­¤ä¸¥æ ¼æ¨¡å¼ã€‚</li><li><code>&quot;always&quot;</code>: çŠ¶æ€å§‹ç»ˆéœ€è¦é€šè¿‡åŠ¨ä½œæ¥æ›´æ–°(å®é™…ä¸Šè¿˜åŒ…æ‹¬åˆ›å»º)ã€‚</li></ul><h3 id="lesson3-ç»™ç»„ä»¶æ·»åŠ å“åº”å¼"><a href="#lesson3-ç»™ç»„ä»¶æ·»åŠ å“åº”å¼" class="headerlink" title="lesson3-ç»™ç»„ä»¶æ·»åŠ å“åº”å¼"></a>lesson3-ç»™ç»„ä»¶æ·»åŠ å“åº”å¼</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gijayj5424j30z80u07wh.jpg" alt="image-20200908160328366"></p><p>ç»™ç»„ä»¶æ·»åŠ å“åº”å¼æœ‰ä»¥ä¸‹ä¸‰ç§åŠæ³•ï¼š</p><p>ğŸ˜ <a href="https://mobx-react.js.org/observer-hoc">observer HOC</a></p><p>ğŸ¤“ <a href="https://mobx-react.js.org/observer-component">observer component</a></p><p>ğŸ§ <a href="https://mobx-react.js.org/observer-hook">useObserver hook</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Observer, useObserver, observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react&#x27;</span> <span class="comment">// 6.x or mobx-react-lite@1.4.0</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = observable(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// named function is optional (for debugging purposes)</span></span><br><span class="line"><span class="keyword">const</span> P1 = observer(<span class="function"><span class="keyword">function</span> <span class="title">P1</span>(<span class="params">&#123; person &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;person.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> P2 = <span class="function">(<span class="params">&#123; person &#125;</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Observer</span>&gt;</span>&#123;() =&gt; <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;person.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">Observer</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> P3 = <span class="function">(<span class="params">&#123; person &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> useObserver(<span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;person.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">P1</span> <span class="attr">person</span>=<span class="string">&#123;person&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">P2</span> <span class="attr">person</span>=<span class="string">&#123;person&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">P3</span> <span class="attr">person</span>=<span class="string">&#123;person&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  person.name = <span class="string">&#x27;Jane&#x27;</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure><h5 id="observer-HOC"><a href="#observer-HOC" class="headerlink" title="observer HOC"></a>observer HOC</h5><p>æ³¨æ„ï¼šmobx-reactä¸mobx-react-liteä¸­éƒ½æœ‰observerï¼Œä½†æ˜¯åè€…ä¸æ”¯æŒç±»ç»„ä»¶ã€‚</p><p>ä»¥ä¸‹æ˜¯å‚æ•°ï¼Œå¦‚æœç»„ä»¶æ˜¯å‡½æ•°å¼ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨optionsï¼Œç±»ç»„ä»¶åˆ™æ²¡æœ‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">observer&lt;P&gt;(baseComponent: React.FC&lt;P&gt;, options?: IObserverOptions): React.FC&lt;P&gt;</span><br><span class="line"></span><br><span class="line">interface IObserverOptions &#123;</span><br><span class="line">    // Pass true to use React.forwardRef over the inner component. It&#x27;s false by the default.</span><br><span class="line">    forwardRef?: boolean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>observeræŠŠç»„ä»¶è½¬æ¢æˆå“åº”å¼ç»„ä»¶ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è¿½è¸ªå“ªä¸ªå¯è§‚å¯Ÿé‡è¢«ä½¿ç”¨äº†ä»¥åŠå½“å€¼æ”¹å˜çš„æ—¶å€™è‡ªåŠ¨é‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observer, useLocalStore &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react&#x27;</span> <span class="comment">// 6.x or mobx-react-lite@1.4.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Counter = observer&lt;Props&gt;(<span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> store = useLocalStore(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: props.initialCount,</span><br><span class="line">    <span class="function"><span class="title">inc</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      store.count += <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;store.count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;store.inc&#125;</span>&gt;</span>Increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>observerå†…éƒ¨ä½¿ç”¨äº†React.memoï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ä¸ç”¨è‡ªå·±å†å°è£…memoï¼Œä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œobserverå†…éƒ¨å°è£…çš„memoåªè´Ÿè´£é»˜è®¤çš„æµ…æ¯”è¾ƒï¼Œå› ä¸ºmobx-reactè®¤ä¸ºï¼Œobservedç»„ä»¶å¾ˆå°‘éœ€è¦åŸºäºå¤æ‚çš„propsè¿›è¡Œæ›´æ–°æ¸²æŸ“ã€‚ä»¥ä¸‹æ˜¯mobx-react-liteä¸­çš„æºç éƒ¨åˆ†æˆªå›¾ï¼Œå‚è€ƒè¡Œ61-63çš„æ³¨é‡Šã€‚</p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gircs01emmj30ut0u0e81.jpg" alt="image-20200915151056480" style="zoom:50%;" /><h5 id="Observer-component"><a href="#Observer-component" class="headerlink" title="Observer component"></a>Observer component</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Observer&gt;&#123;renderFn&#125;&lt;/Observer&gt;</span><br></pre></td></tr></table></figure><p>æ¥æ”¶ä¸€ä¸ªåŒ¿åæ— å‚æ•°çš„å‡½æ•°ä½œä¸ºchildrenï¼Œå¹¶ä¸”è¿”å›Reactå…ƒç´ ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observer, useLocalStore &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react&#x27;</span> <span class="comment">// 6.x or mobx-react-lite@1.4.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">ObservePerson</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> person = useLocalStore(<span class="function">() =&gt;</span> (&#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span> &#125;))</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;person.name&#125; <span class="tag">&lt;<span class="name">i</span>&gt;</span>I will never change my name<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Observer</span>&gt;</span>&#123;() =&gt; <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;person.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">Observer</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> (person.name = &#x27;Mike&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="xml">          I want to be Mike</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šåªèƒ½ä½¿å¾—å®ƒè‡ªå·±çš„è¿”å›ç»„ä»¶æ˜¯å“åº”å¼çš„ï¼Œå¦‚æœä½ é‡Œé¢è¿˜åµŒå¥—äº†åˆ«çš„ç»„ä»¶ï¼Œé‚£è¿™ä¸ªé‡Œé¢çš„ç»„ä»¶å¾—é è‡ªå·±å˜æˆå“åº”å¼~</p><p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react&#x27;</span> <span class="comment">// 6.x or mobx-react-lite@1.4.0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ObservePerson</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Observer</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;() =&gt; (</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">GetStore</span>&gt;</span>&#123;store =&gt; <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;self&quot;</span>&gt;</span>&#123;store.wontSeeChangesToThis&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">GetStore</span>&gt;</span></span></span><br><span class="line"><span class="xml">      )&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Observer</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œè¿™ä¸ªclassNameä¸ºdivå°±ä¸æ˜¯å“åº”å¼ï¼Œå¦‚æœæƒ³å˜æˆå“åº”å¼ï¼Œéœ€è¦å†é¢å¤–æ·»åŠ ï¼Œæ¯”å¦‚è¯´åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react&#x27;</span> <span class="comment">// 6.x or mobx-react-lite@1.4.0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ObservePerson</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">GetStore</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;store =&gt; (</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Observer</span>&gt;</span>&#123;() =&gt; <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;store.changesAreSeenAgain&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">Observer</span>&gt;</span></span></span><br><span class="line"><span class="xml">      )&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">GetStore</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="useObserver-hook"><a href="#useObserver-hook" class="headerlink" title="useObserver hook"></a>useObserver hook</h5><p>å‡½æ•°ç­¾åï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useObserver&lt;T&gt;(fn: () =&gt; T, baseComponentName = &quot;observed&quot;, options?: IUseObserverOptions): T</span><br><span class="line"></span><br><span class="line">interface IUseObserverOptions &#123;</span><br><span class="line">    // optional custom hook that should make a component re-render (or not) upon changes</span><br><span class="line">    useForceUpdate: () =&gt; () =&gt; void</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè‡ªå®šä¹‰hookæ–¹æ³•åªå­˜åœ¨äºmobx-react-liteï¼Œæˆ–è€…æ˜¯mobx-react@6ã€‚</p><p>è¿™ä¸ªhookæ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç»„ä»¶å˜å¾—å“åº”å¼ï¼Œä½†æ˜¯å…³äºä¸€äº›ä¼˜åŒ–å…¼å®¹æ‰‹æ®µå¦‚memoæˆ–è€…forwardRefï¼Œåˆ™éœ€è¦ä½ è‡ªå·±æ‰‹åŠ¨æ·»åŠ ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useObserver, useLocalStore &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react&#x27;</span> <span class="comment">// 6.x or mobx-react-lite@1.4.0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> person = useLocalStore(<span class="function">() =&gt;</span> (&#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span> &#125;))</span><br><span class="line">  <span class="keyword">return</span> useObserver(<span class="function">() =&gt;</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;person.name&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> (person.name = &#x27;Mike&#x27;)&#125;&gt;No! I am Mike<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  ))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•æœ‰ä¸ªä¼˜ç‚¹ï¼Œå°±æ˜¯ä»»ä½•çš„hookæ”¹å˜observableï¼Œç»„ä»¶éƒ½ä¸ä¼šé‡å¤æ¸²æŸ“ã€‚</p><p>è¿™ä¸ªæ–¹æ³•æœ‰ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å°±ç®—ä½ æ˜¯åœ¨ç»„ä»¶çš„æŸä¸€éƒ¨åˆ†ä½¿ç”¨ï¼Œä½†æ˜¯å´èƒ½å¼•èµ·ç»„ä»¶çš„å…¨éƒ¨æ›´æ–°~ï¼Œæ‰€ä»¥æ…ç”¨ï¼Œå¦‚æœæƒ³è¦ç²¾ç»†æ§åˆ¶çš„è¯ï¼Œè¿˜æ˜¯è¦é€‰æ‹©<Observer/>æˆ–è€…useForceUpdateã€‚</p><h3 id="lesson4-Mange-state-çŠ¶æ€ç®¡ç†"><a href="#lesson4-Mange-state-çŠ¶æ€ç®¡ç†" class="headerlink" title="lesson4-Mange state-çŠ¶æ€ç®¡ç†"></a>lesson4-Mange state-çŠ¶æ€ç®¡ç†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useLocalStore&lt;T, S&gt;(initializer: () =&gt; T, source?: S): T</span><br></pre></td></tr></table></figure><p>æœ¬åœ°çš„observable stateå¯ä»¥ä½¿ç”¨useLocalStoreï¼Œä½†æ˜¯è®°ä½ä¸€ç‚¹å°±æ˜¯å¯¹äºæ¯ä¸ªç»„ä»¶å®ä¾‹ï¼ŒuseLocalStoreçš„<strong>åˆå§‹åŒ–å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œå¹¶ä¸”æ˜¯åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œéƒ½æœ‰æ•ˆã€‚</p><p>useLocalStoreè¿”å›å¯¹è±¡é‡Œçš„æ‰€æœ‰å±æ€§å€¼éƒ½ä¼šè‡ªåŠ¨è½¬å˜ä¸ºobservableï¼Œæ‰€æœ‰gettersä¼šè¢«è½¬åŒ–ä¸ºcomputedå±æ€§ï¼Œæ‰€æœ‰æ–¹æ³•ä¹Ÿä¼šä¸storeå…³è”ä¸”è‡ªåŠ¨å¼•ç”¨ mobxçš„transactionã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useLocalStore, useObserver &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react&#x27;</span> <span class="comment">// 6.x</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SmartTodo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> todo = useLocalStore(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Click to toggle&#x27;</span>,</span><br><span class="line">    <span class="attr">done</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="function"><span class="title">toggle</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      todo.done = !todo.done</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">get</span> <span class="title">emoji</span>() &#123;</span><br><span class="line">      <span class="keyword">return</span> todo.done ? <span class="string">&#x27;ğŸ˜œ&#x27;</span> : <span class="string">&#x27;ğŸƒ&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> useObserver(<span class="function">() =&gt;</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">onClick</span>=<span class="string">&#123;todo.toggle&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;todo.title&#125; &#123;todo.emoji&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">  ))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä¸è¦è§£æ„"><a href="#ä¸è¦è§£æ„" class="headerlink" title="ä¸è¦è§£æ„"></a>ä¸è¦è§£æ„</h5><p>è§£æ„çš„è¯ï¼Œä¼šç ´åå“åº”å¼ã€‚mobxä¸­çš„observableséƒ½æ˜¯å¯¹è±¡ï¼Œä¸€æ—¦è§£æ„ï¼Œæ‰€æœ‰çš„åŸå§‹å˜é‡éƒ½ä¼šåœç•™åœ¨ä¸Šä¸€ä¸ªå€¼ï¼Œè€Œä¸å†æ˜¯observableäº†ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥å–å€¼todo.titleï¼Œä½†æ˜¯ä¸èƒ½const {title} = todoã€‚</p><h5 id="å…³äºå…¨å±€store"><a href="#å…³äºå…¨å±€store" class="headerlink" title="å…³äºå…¨å±€store"></a>å…³äºå…¨å±€store</h5><p>è™½ç„¶useLocalStoreçš„å‘½åå¬ç€åƒæ˜¯åªèƒ½ç”¨åœ¨ç»„ä»¶å†…ï¼Œä½†å®é™…ä¸Šï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨å®ƒå†åŠ ä¸ŠReact Contextæ¥å¤„ç†å…¨å±€çš„storeã€‚</p><h3 id="lesson5-å®ç°mobx-react-liteçš„useObserver"><a href="#lesson5-å®ç°mobx-react-liteçš„useObserver" class="headerlink" title="lesson5-å®ç°mobx-react-liteçš„useObserver"></a>lesson5-å®ç°mobx-react-liteçš„useObserver</h3><p>useObserverç®€ç‰ˆå®ç°ä»£ç å¦‚ä¸‹ï¼Œè¯¦ç»†å‚è€ƒgit-lesson5ï¼š<a href="https://github.com/bubucuo/React-Mobx/tree/lesson5">https://github.com/bubucuo/React-Mobx/tree/lesson5</a></p><h5 id="Reaction"><a href="#Reaction" class="headerlink" title="Reaction"></a>Reaction</h5><p>Reactionæ˜¯ä¸€ç§çš„ç‰¹æ®Šçš„è¡ç”Ÿï¼ˆDerivationï¼‰ï¼Œå¯ä»¥æ³¨å†Œå“åº”å‡½æ•°ï¼Œå¦‚å¼ºåˆ¶ç»„ä»¶æ›´æ–°çš„forceUpdateã€‚å¸¸ç”¨äºè§¦å‘å‰¯ä½œç”¨ï¼Œå¦‚æ‰“å°æ—¥å¿—ã€æ›´æ–° DOM æˆ–è€…å‘é€ç½‘ç»œè¯·æ±‚ç­‰ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;useRef, useReducer, useEffect&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;Reaction&#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useForceUpdate&#125; <span class="keyword">from</span> <span class="string">&quot;./utils&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observerComponentNameFor</span>(<span class="params">baseComponentName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`observer<span class="subst">$&#123;baseComponentName&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useObserver</span>(<span class="params">fn, baseComponentName = <span class="string">&quot;observed&quot;</span>, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// const [, forceUpdate] = useReducer(x =&gt; x + 1, 0);</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> wantedForceUpdateHook = options.useForceUpdate || useForceUpdate;</span><br><span class="line">  <span class="keyword">const</span> forceUpdate = wantedForceUpdateHook();</span><br><span class="line">  <span class="comment">// ç»„ä»¶æœ‰åˆæ¬¡æ¸²æŸ“å’Œæ›´æ–°ï¼Œé‚£è¿™ä¸ªæ—¶å€™reactionå¾—åšä¸€ä¸ªç¼“å­˜ï¼Œ</span></span><br><span class="line">  <span class="keyword">const</span> reactionTrackingRef = useRef(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!reactionTrackingRef.current) &#123;</span><br><span class="line">    reactionTrackingRef.current = &#123;</span><br><span class="line">      <span class="attr">reaction</span>: <span class="keyword">new</span> Reaction(</span><br><span class="line">        observerComponentNameFor(baseComponentName),</span><br><span class="line">        <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// å“åº”å‡½æ•°ä½¿ç”¨forceUpdate</span></span><br><span class="line">          forceUpdate();</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123;reaction&#125; = reactionTrackingRef.current;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ¸…ç†reaction</span></span><br><span class="line">      reactionTrackingRef.current.reaction.dispose();</span><br><span class="line">      reactionTrackingRef.current = <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rendering;</span><br><span class="line"></span><br><span class="line">  reaction.track(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    rendering = fn();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> rendering;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h3 id="lesson6-å®ç°mobx-react-liteçš„Observerä¸observer"><a href="#lesson6-å®ç°mobx-react-liteçš„Observerä¸observer" class="headerlink" title="lesson6-å®ç°mobx-react-liteçš„Observerä¸observer"></a>lesson6-å®ç°mobx-react-liteçš„Observerä¸observer</h3><p>ä¸¤è€…éƒ½æ˜¯åŸºäºuseObserverå®ç°çš„ã€‚</p><p>é¦–å…ˆæ˜¯Observer Componentï¼ŒæŠŠchildrenæˆ–è€…renderä½œä¸ºuseObserverçš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå‡½æ•°è¿”å›å³å¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useObserver&#125; <span class="keyword">from</span> <span class="string">&quot;./useObserver&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ObserverComponent</span>(<span class="params">&#123;children, render&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> component = children || render;</span><br><span class="line">  <span class="keyword">return</span> useObserver(component);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;ObserverComponent <span class="keyword">as</span> Observer&#125;;</span><br></pre></td></tr></table></figure><p>mobx-react-liteçš„observeråˆ™æ˜¯ç›¸å½“äºåœ¨useObserverçš„åŸºç¡€ä¸Šå†å°è£…äº†ä¸€å±‚forwardRefå’Œmemoã€‚</p><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;memo, forwardRef&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useObserver&#125; <span class="keyword">from</span> <span class="string">&quot;./useObserver&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">observer</span>(<span class="params">baseComponent, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> realOptions = &#123;</span><br><span class="line">    <span class="attr">forwardRef</span>: <span class="literal">false</span>,</span><br><span class="line">    ...options</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> useWrappedComponent = <span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> useObserver(<span class="function">() =&gt;</span> baseComponent(props, ref));</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> memoComponent;</span><br><span class="line">  <span class="keyword">if</span> (realOptions.forwardRef) &#123;</span><br><span class="line">    memoComponent = memo(forwardRef(useWrappedComponent));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    memoComponent = memo(useWrappedComponent);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> memoComponent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="lesson7-è¯¦è§£mobx-react-liteçš„useAsObservableSourceçš„ä½¿ç”¨åœºæ™¯åŠå®ç°"><a href="#lesson7-è¯¦è§£mobx-react-liteçš„useAsObservableSourceçš„ä½¿ç”¨åœºæ™¯åŠå®ç°" class="headerlink" title="lesson7-è¯¦è§£mobx-react-liteçš„useAsObservableSourceçš„ä½¿ç”¨åœºæ™¯åŠå®ç°"></a>lesson7-è¯¦è§£mobx-react-liteçš„useAsObservableSourceçš„ä½¿ç”¨åœºæ™¯åŠå®ç°</h3><p><strong><a href="mailto:&#x6d;&#111;&#98;&#x78;&#x2d;&#x72;&#101;&#97;&#99;&#x74;&#x2d;&#108;&#x69;&#x74;&#101;&#64;&#49;&#x2e;&#x33;&#46;&#x30;">&#x6d;&#111;&#98;&#x78;&#x2d;&#x72;&#101;&#97;&#99;&#x74;&#x2d;&#108;&#x69;&#x74;&#101;&#64;&#49;&#x2e;&#x33;&#46;&#x30;</a></strong></p><p>åœ¨ä¸æ”¹å˜åŸå…ˆé€»è¾‘çš„åŸºç¡€ä¸Šä½¿ç”¨mobXã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useAsObservableSource&lt;T&gt;(state: T): T</span><br></pre></td></tr></table></figure><h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><p>actionæ¥æ”¶ä¸€ä¸ªå‡½æ•°å¹¶è¿”å›å…·æœ‰åŒæ ·ç­¾åçš„å‡½æ•°ï¼Œä½†æ˜¯ç”¨ <code>transaction</code>ã€<code>untracked</code> å’Œ <code>allowStateChanges</code> åŒ…è£¹èµ·æ¥ï¼Œå°¤å…¶æ˜¯ <code>transaction</code> çš„è‡ªåŠ¨åº”ç”¨ä¼šäº§ç”Ÿå·¨å¤§çš„æ€§èƒ½æ”¶ç›Šï¼Œ åŠ¨ä½œä¼šåˆ†æ‰¹å¤„ç†å˜åŒ–å¹¶åªåœ¨(æœ€å¤–å±‚çš„)åŠ¨ä½œå®Œæˆåé€šçŸ¥è®¡ç®—å€¼å’Œååº”ã€‚ è¿™å°†ç¡®ä¿åœ¨åŠ¨ä½œå®Œæˆä¹‹å‰ï¼Œåœ¨åŠ¨ä½œæœŸé—´ç”Ÿæˆçš„ä¸­é—´å€¼æˆ–æœªå®Œæˆçš„å€¼å¯¹åº”ç”¨çš„å…¶ä½™éƒ¨åˆ†æ˜¯ä¸å¯è§çš„ã€‚</p><p>å»ºè®®å¯¹ä»»ä½•ä¿®æ”¹ observables æˆ–å…·æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ä½¿ç”¨ <code>(@)action</code> ã€‚ ç»“åˆå¼€å‘è€…å·¥å…·çš„è¯ï¼ŒåŠ¨ä½œè¿˜èƒ½æä¾›éå¸¸æœ‰ç”¨çš„è°ƒè¯•ä¿¡æ¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, action &#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = observable(&#123; <span class="attr">value</span>: <span class="number">0</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> increment = action(<span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">    state.value++</span><br><span class="line">    state.value++</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">increment(state)</span><br></pre></td></tr></table></figure><h4 id="runInAction-fn"><a href="#runInAction-fn" class="headerlink" title="runInAction(fn)"></a>runInAction(fn)</h4><p><code>runInAction</code> æ˜¯ä¸ªç®€å•çš„å·¥å…·å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä»£ç å—å¹¶åœ¨(å¼‚æ­¥çš„)åŠ¨ä½œä¸­æ‰§è¡Œã€‚è¿™å¯¹äºå³æ—¶åˆ›å»ºå’Œæ‰§è¡ŒåŠ¨ä½œéå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚åœ¨å¼‚æ­¥è¿‡ç¨‹ä¸­ã€‚<code>runInAction(f)</code> æ˜¯ <code>action(f)()</code> çš„è¯­æ³•ç³–ã€‚å¦‚å‚è€ƒä¸Šé¢actionçš„ä¾‹å­ï¼Œå¦‚æœincrementåªç”¨ä¸€æ¬¡ï¼Œä¸æƒ³å†åˆ›å»ºçš„è¯ï¼Œå°±å¯ä»¥æ¢æˆç”¨ä¸‹é¢çš„runInActionçš„å†™æ³•äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable &#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = observable(&#123; <span class="attr">value</span>: <span class="number">0</span> &#125;)</span><br><span class="line"></span><br><span class="line">runInAction(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    state.value++</span><br><span class="line">    state.value++</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å†å‚è€ƒä¸ªå¼‚æ­¥çš„ä¾‹å­ï¼Œä½¿ç”¨async/await + runInActionï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; runInAction, makeAutoObservable &#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> </span>&#123;</span><br><span class="line">    githubProjects = []</span><br><span class="line">    state = <span class="string">&quot;pending&quot;</span> <span class="comment">// &quot;pending&quot; / &quot;done&quot; / &quot;error&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        makeAutoObservable(<span class="built_in">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">fetchProjects</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.githubProjects = []</span><br><span class="line">        <span class="built_in">this</span>.state = <span class="string">&quot;pending&quot;</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> projects = <span class="keyword">await</span> fetchGithubProjectsSomehow()</span><br><span class="line">            <span class="keyword">const</span> filteredProjects = somePreprocessing(projects)</span><br><span class="line">            runInAction(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.githubProjects = filteredProjects</span><br><span class="line">                <span class="built_in">this</span>.state = <span class="string">&quot;done&quot;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            runInAction(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.state = <span class="string">&quot;error&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è‡ªå·±æ‰‹åŠ¨å®ç°useAsObservableSource-js"><a href="#è‡ªå·±æ‰‹åŠ¨å®ç°useAsObservableSource-js" class="headerlink" title="è‡ªå·±æ‰‹åŠ¨å®ç°useAsObservableSource.js"></a>è‡ªå·±æ‰‹åŠ¨å®ç°useAsObservableSource.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;observable, runInAction&#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useAsObservableSource</span>(<span class="params">current</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [res] = React.useState(<span class="function">() =&gt;</span> observable(current));</span><br><span class="line"></span><br><span class="line">  runInAction(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign(res, current);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="lesson8-å®ç°mobx-react-liteçš„useLocalStore"><a href="#lesson8-å®ç°mobx-react-liteçš„useLocalStore" class="headerlink" title="lesson8-å®ç°mobx-react-liteçš„useLocalStore"></a>lesson8-å®ç°mobx-react-liteçš„useLocalStore</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useLocalStore&lt;T, S&gt;(initializer: <span class="function">() =&gt;</span> T, source?: S): T</span><br></pre></td></tr></table></figure><h4 id="transaction-äº‹åŠ¡"><a href="#transaction-äº‹åŠ¡" class="headerlink" title="transaction(äº‹åŠ¡)"></a>transaction(äº‹åŠ¡)</h4><p><em>transaction æ˜¯åº•å±‚ APIï¼Œåœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹ action æˆ– runInAction ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©</em></p><p><code>transaction(worker: () =&gt; void)</code> å¯ä»¥ç”¨æ¥æ‰¹é‡æ›´æ–°ï¼Œåœ¨äº‹åŠ¡ç»“æŸå‰ä¸ä¼šé€šçŸ¥ä»»ä½•è§‚å¯Ÿè€…ã€‚ <code>transaction</code> æ¥æ”¶ä¸€ä¸ªæ— å‚æ•°çš„ <code>worker</code> å‡½æ•°ä½œä¸ºå‚æ•°å¹¶è¿è¡Œå®ƒã€‚ è¿™ä¸ªå‡½æ•°å®Œæˆè¿è¡Œå‰ä¸ä¼šé€šçŸ¥ä»»ä½•è§‚å¯Ÿè€…ã€‚ <code>transaction</code> è¿”å› <code>worker</code> å‡½æ•°è¿”å›çš„ä»»ä½•å€¼ã€‚ æ³¨æ„ <code>transaction</code> å®Œå…¨æ˜¯åŒæ­¥è¿è¡Œçš„ã€‚ Transactions å¯ä»¥åµŒå¥—ã€‚åªæœ‰åœ¨å®Œæˆæœ€å¤–é¢çš„ <code>transaction</code> åï¼Œå…¶ä»–ç­‰å¾…çš„ reaction æ‰ä¼šè¿è¡Œã€‚</p><h4 id="å®ç°useLocalStore"><a href="#å®ç°useLocalStore" class="headerlink" title="å®ç°useLocalStore"></a>å®ç°useLocalStore</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;observable, runInAction, transaction&#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useAsObservableSource&#125; <span class="keyword">from</span> <span class="string">&quot;./useAsObservableSource&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useLocalStore</span>(<span class="params">initializer, current</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> source = useAsObservableSource(current);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> React.useState(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> local = observable(initializer(source));</span><br><span class="line">    runInAction(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">Object</span>.keys(local).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> value = local[key];</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">          local[key] = wrapInTransaction(value, local);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> local;</span><br><span class="line">  &#125;)[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wrapInTransaction</span>(<span class="params">fn, context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> transaction(<span class="function">() =&gt;</span> fn.apply(context, args));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><p>æ³¨æ„ï¼šuseObserverèƒ½å¼•èµ·ç»„ä»¶çš„æ•´ä½“æ¸²æŸ“ï¼Œå¦‚æœæƒ³è¦å±€éƒ¨æ§åˆ¶çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨Observer Componentã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  useLocalStore,</span><br><span class="line">  useObserver,</span><br><span class="line">  useAsObservableSource,</span><br><span class="line">  Observer</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../k-mobx-react-lite/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UseLocalStore</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;sss&quot;</span>); <span class="comment">//sy-log</span></span><br><span class="line">  <span class="keyword">const</span> newProps = &#123;...props&#125;; <span class="comment">// useAsObservableSource(props);</span></span><br><span class="line">  <span class="comment">// useLocalStoreç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½æ˜¯æœ‰æ•ˆçš„</span></span><br><span class="line">  <span class="keyword">const</span> countStore = useLocalStore(</span><br><span class="line">    <span class="function"><span class="params">newProps</span> =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">count</span>: props.init === <span class="literal">undefined</span> ? <span class="number">0</span> : props.init,</span><br><span class="line">      <span class="function"><span class="title">add</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.count = <span class="built_in">this</span>.count + <span class="number">1</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="keyword">get</span> <span class="title">emoji</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.count % <span class="number">2</span> ? <span class="string">&quot;ğŸ˜œ&quot;</span> : <span class="string">&quot;ğŸƒ&quot;</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="keyword">get</span> <span class="title">specialNum</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> newProps.init &gt; -<span class="number">1</span> &amp;&amp; newProps.init &lt; <span class="number">10</span></span><br><span class="line">          ? <span class="string">&quot;0&quot;</span> + newProps.init</span><br><span class="line">          : newProps.init;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    newProps</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// return useObserver(() =&gt; (</span></span><br><span class="line">  <span class="comment">//   &lt;div className=&quot;border&quot;&gt;</span></span><br><span class="line">  <span class="comment">//     &lt;h3&gt;UseLocalStore&lt;/h3&gt;</span></span><br><span class="line">  <span class="comment">//     &lt;button onClick=&#123;countStore.add&#125;&gt;count: &#123;countStore.count&#125;&lt;/button&gt;</span></span><br><span class="line">  <span class="comment">//     &lt;p&gt;&#123;countStore.emoji&#125;&lt;/p&gt;</span></span><br><span class="line">  <span class="comment">//     &lt;p&gt;&#123;countStore.specialNum&#125;&lt;/p&gt;</span></span><br><span class="line">  <span class="comment">//   &lt;/div&gt;</span></span><br><span class="line">  <span class="comment">// ));</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å±€éƒ¨æ§åˆ¶</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Observer</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;() =&gt; (</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;border&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">h3</span>&gt;</span>UseLocalStore<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;countStore.add&#125;</span>&gt;</span>count: &#123;countStore.count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;countStore.emoji&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;countStore.specialNum&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      )&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Observer</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> UseLocalStore;</span><br></pre></td></tr></table></figure><h3 id="lesson9-å®ç°mobx-reactçš„observer"><a href="#lesson9-å®ç°mobx-reactçš„observer" class="headerlink" title="lesson9-å®ç°mobx-reactçš„observer"></a>lesson9-å®ç°mobx-reactçš„observer</h3><p>mobx-react@6ä»¥åï¼Œmobx-reactçš„observerä¸­ä¼šåˆ¤æ–­ä¸‹æ˜¯å¦æ˜¯å‡½æ•°ç»„ä»¶ï¼Œå¦‚æœæ˜¯å‡½æ•°ç»„ä»¶ï¼Œåˆ™ç”¨çš„è¿˜æ˜¯mobx-react-liteä¸­çš„observerï¼Œå¦‚æœæ˜¯ç±»ç»„ä»¶ï¼Œåˆ™è°ƒç”¨makeClassComponentObserverã€‚</p><p>æ³¨æ„åŒºåˆ†ï¼šç›®å‰<a href="mailto:&#x6d;&#x6f;&#x62;&#x78;&#45;&#114;&#x65;&#x61;&#x63;&#116;&#x2d;&#x6c;&#105;&#116;&#x65;&#64;&#x32;&#46;&#x32;">&#x6d;&#x6f;&#x62;&#x78;&#45;&#114;&#x65;&#x61;&#x63;&#116;&#x2d;&#x6c;&#105;&#116;&#x65;&#64;&#x32;&#46;&#x32;</a>ä¸­çš„observeræœ‰forwardRefé…ç½®é¡¹ï¼Œä½†æ˜¯ç›®å‰<a href="mailto:&#x6d;&#x6f;&#98;&#120;&#x2d;&#x72;&#101;&#97;&#99;&#x74;&#64;&#x36;&#x2e;&#51;&#46;&#x30;">&#x6d;&#x6f;&#98;&#120;&#x2d;&#x72;&#101;&#97;&#99;&#x74;&#64;&#x36;&#x2e;&#51;&#46;&#x30;</a>ä¸æ”¯æŒï¼Œéœ€è¦è‡ªå·±é…ç½®ã€‚</p><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><h4 id="observer"><a href="#observer" class="headerlink" title="observer"></a>observer</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;observer <span class="keyword">as</span> observerLite, Observer&#125; <span class="keyword">from</span> <span class="string">&quot;../k-mobx-react-lite/&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;makeClassComponentObserver&#125; <span class="keyword">from</span> <span class="string">&quot;./observerClass&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">observer</span>(<span class="params">component, options</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// forwardRef</span></span><br><span class="line">  <span class="keyword">if</span> (component[<span class="string">&quot;$$typeof&quot;</span>] === <span class="built_in">Symbol</span>.for(<span class="string">&quot;react.forward_ref&quot;</span>)) &#123;</span><br><span class="line">    <span class="keyword">const</span> baseRender = component[<span class="string">&quot;render&quot;</span>];</span><br><span class="line">    <span class="keyword">return</span> React.forwardRef(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Observer</span>&gt;</span>&#123;() =&gt; baseRender.apply(undefined, args)&#125;<span class="tag">&lt;/<span class="name">Observer</span>&gt;</span></span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‡½æ•°ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    (<span class="keyword">typeof</span> component === <span class="string">&quot;function&quot;</span> &amp;&amp; !component.prototype) ||</span><br><span class="line">    !component.prototype.render</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">return</span> observerLite(component, options);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç±»ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">return</span> makeClassComponentObserver(component);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="makeClassComponentObserver"><a href="#makeClassComponentObserver" class="headerlink" title="makeClassComponentObserver"></a>makeClassComponentObserver</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Reaction&#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">makeClassComponentObserver</span>(<span class="params">componentClass</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> target = componentClass.prototype;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> baseRender = target.render;</span><br><span class="line">  target.render = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> makeComponentReactive.call(<span class="built_in">this</span>, baseRender);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> componentClass;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeComponentReactive</span>(<span class="params">render</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> baseRender = render.bind(<span class="built_in">this</span>);</span><br><span class="line">  <span class="keyword">let</span> isRenderingPending = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">const</span> reaction = <span class="keyword">new</span> Reaction(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.constructor.name&#125;</span>.render`</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isRenderingPending) &#123;</span><br><span class="line">      isRenderingPending = <span class="literal">true</span>;</span><br><span class="line">      Component.prototype.forceUpdate.call(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.render = reactiveRender;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reactiveRender</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    isRenderingPending = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> rendering = <span class="literal">undefined</span>;</span><br><span class="line">    reaction.track(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      rendering = baseRender();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> rendering;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> reactiveRender.call(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="lesson10-mobx-reactçš„Providerã€injectçš„ä½¿ç”¨"><a href="#lesson10-mobx-reactçš„Providerã€injectçš„ä½¿ç”¨" class="headerlink" title="lesson10-mobx-reactçš„Providerã€injectçš„ä½¿ç”¨"></a>lesson10-mobx-reactçš„Providerã€injectçš„ä½¿ç”¨</h3><p><code>Provider</code>æ˜¯ä¸ªèƒ½å¤Ÿä¼ é€’storeçš„ç»„ä»¶ï¼Œä¹Ÿæ”¯æŒä¼ é€’å…¶ä»–éstoreæ•°æ®ï¼Œå…¶å®ç°æœºåˆ¶å°±æ˜¯Reactçš„Contextè·¨å±‚çº§ä¼ é€’ã€‚å¦‚æœä½ æœ‰ä¸€äº›éœ€è¦è·¨å±‚çº§æ•°æ®éœ€è¦ä¼ é€’ï¼Œå¯ä»¥è€ƒè™‘ä¸‹è¿™ä¸ªç»„ä»¶ã€‚</p><p><code>inject</code>å¯ä»¥ç”¨äºæå–ä½ ä¼ è¾“çš„æ•°æ®çš„storeï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ªé«˜é˜¶ç»„ä»¶ï¼ˆhocï¼‰ã€‚</p><p>å‚è€ƒä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">@inject(<span class="string">&quot;color&quot;</span>)</span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> <span class="attr">this.props.color</span> &#125;&#125;&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                &#123;this.props.text&#125; <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> children = <span class="built_in">this</span>.props.messages.map(<span class="function"><span class="params">message</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Message</span> <span class="attr">text</span>=<span class="string">&#123;message.text&#125;</span> /&gt;</span></span>)</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">color</span>=<span class="string">&quot;red&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>è¯»å–Provideræä¾›çš„æ•°æ®ä¸æ˜¯éå¾—ç”¨injectï¼Œç”¨React.useContext(MobXProviderContext)ä¹Ÿå¯ä»¥ï¼ŒMobXProviderContextæ¥è‡ªmobx-reactã€‚</li><li>ä½¿ç”¨injectå’Œobserverçš„æ—¶å€™ï¼Œæ³¨æ„é¡ºåºï¼Œobserveråº”è¯¥æ˜¯å†…éƒ¨ï¼Œinjectåœ¨å¤–é¢ã€‚</li></ul><h3 id="lesson11-å®ç°mobx-reactçš„Providerã€inject"><a href="#lesson11-å®ç°mobx-reactçš„Providerã€inject" class="headerlink" title="lesson11-å®ç°mobx-reactçš„Providerã€inject"></a>lesson11-å®ç°mobx-reactçš„Providerã€inject</h3><p>ProvideråŸºäºContextä¸ç»„ä»¶å¤åˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;useRef, useContext&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;MobXProviderContext&#125; <span class="keyword">from</span> <span class="string">&quot;./MobXProviderContext&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">Provider</span>(<span class="params">&#123;children, ...stores&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> parentValue = useContext(MobXProviderContext);</span><br><span class="line">  <span class="keyword">const</span> mutableProvdierRef = useRef(&#123;...parentValue, ...stores&#125;);</span><br><span class="line">  <span class="keyword">const</span> value = mutableProvdierRef.current;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">MobXProviderContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;children&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">MobXProviderContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>injectåŸºäºé«˜é˜¶ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;MobXProviderContext&#125; <span class="keyword">from</span> <span class="string">&quot;./MobXProviderContext&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> inject = <span class="function">(<span class="params">...storeNames</span>) =&gt;</span> <span class="function"><span class="params">component</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> Injector = React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> context = useContext(MobXProviderContext);</span><br><span class="line">    <span class="keyword">const</span> newProps = &#123;</span><br><span class="line">      ...props,</span><br><span class="line">      ...context</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (ref) &#123;</span><br><span class="line">      newProps.ref = ref;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> React.createElement(component, newProps);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Injector;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="lesson12-å®ç°mobxçš„observable"><a href="#lesson12-å®ç°mobxçš„observable" class="headerlink" title="lesson12-å®ç°mobxçš„observable"></a>lesson12-å®ç°mobxçš„observable</h3><p>MobX ä¸ºç°æœ‰çš„æ•°æ®ç»“æ„(å¦‚å¯¹è±¡ï¼Œæ•°ç»„å’Œç±»å®ä¾‹)æ·»åŠ äº†å¯è§‚å¯Ÿçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨ observableå°±å¯ä»¥ç®€å•åœ°å®Œæˆè¿™ä¸€åˆ‡ã€‚</p><p>Observable å€¼å¯ä»¥æ˜¯JSåŸºæœ¬æ•°æ®ç±»å‹ã€å¼•ç”¨ç±»å‹ã€æ™®é€šå¯¹è±¡ã€ç±»å®ä¾‹ã€æ•°ç»„å’Œæ˜ å°„ã€‚</p><h4 id="å®ç°observable"><a href="#å®ç°observable" class="headerlink" title="å®ç°observable"></a>å®ç°observable</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> observable = assign(createObservable, observableFactories)</span><br></pre></td></tr></table></figure><h4 id="å®ç°extendObservable"><a href="#å®ç°extendObservable" class="headerlink" title="å®ç°extendObservable"></a>å®ç°extendObservable</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">extendObservable(target, properties, decorators?, options?)</span><br></pre></td></tr></table></figure><p>extendObservableç”¨æ¥å‘å·²å­˜åœ¨çš„ç›®æ ‡å¯¹è±¡æ·»åŠ  observable å±æ€§ã€‚ å±æ€§æ˜ å°„ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹éƒ½ä¼šå¯¼è‡´ç›®æ ‡ä¸Šçš„æ–°çš„ observable å±æ€§è¢«åˆå§‹åŒ–ä¸ºç»™å®šå€¼ã€‚ å±æ€§æ˜ å°„ä¸­çš„ä»»æ„ getters éƒ½ä¼šè½¬åŒ–æˆè®¡ç®—å±æ€§ã€‚</p><p><code>decorators</code> å‚æ•°ç”¨æ¥é‡è½½ç”¨äºæŒ‡å®šå±æ€§çš„è£…é¥°å™¨ï¼Œç±»ä¼¼äº <code>decorate</code> å’Œ <code>observable.object</code> ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;asObservableObject&#125; <span class="keyword">from</span> <span class="string">&quot;./observableObject&quot;</span>;</span><br><span class="line"><span class="comment">// import &#123;makeProperty&#125; from &quot;./makeObservable&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">extendObservable</span>(<span class="params">target, props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// step1</span></span><br><span class="line">  <span class="keyword">const</span> adm = asObservableObject(target);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// step2</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(props).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// makeProperty(adm, target, key, props[key]);</span></span><br><span class="line">    adm.addObservableProp_(key, props[key]);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸observableæ— ä¾èµ–å…³ç³»</p><p>æœ¬åœ°çš„observable stateå¯ä»¥ä½¿ç”¨useLocalStoreï¼Œä½†æ˜¯è®°ä½ä¸€ç‚¹å°±æ˜¯å¯¹äºæ¯ä¸ªç»„ä»¶å®ä¾‹ï¼ŒuseLocalStoreçš„<strong>åˆå§‹åŒ–å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œå¹¶ä¸”æ˜¯åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œéƒ½æœ‰æ•ˆã€‚</p><p>useLocalStoreæ”¯æŒä½ ä¼ é€’ä¸€ä¸ªéobservableçš„plain objectä½œä¸ºç¬¬äºŒä¸ªå‚æ•°å­˜åœ¨è¿™ä¸ªstoreçš„è¡ç”Ÿé‡Œï¼Œå®ƒå¯ä»¥æ˜¯propsã€useContextç”šè‡³æ˜¯useReducerã€‚å½“ç„¶ï¼Œè¿™ä¸ªå‚æ•°å¿…é¡»å¾—å§‹ç»ˆä¿æŒä¸€ç§ç»“æ„ï¼Œä¸èƒ½ç”¨åœ¨æ¡ä»¶è¯­å¥ä¸­ã€‚</p><p>æ³¨ï¼šuseLocalStoreä¸useAsObservableSourceçš„åŒºåˆ«åœ¨äºåè€…åªèƒ½ç”¨äºobjectï¼Œå¦‚æœä½ ä¸éœ€è¦actionå’Œcomputedå±æ€§ï¼Œé‚£å®Œå…¨å¯ä»¥ä½¿ç”¨åè€…ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &#123; observer, useLocalStore &#125; from &#x27;mobx-react&#x27; // 6.x</span><br><span class="line"></span><br><span class="line">export const Counter = observer(props =&gt; &#123;</span><br><span class="line">  const store = useLocalStore(</span><br><span class="line">    // don&#x27;t ever destructure source, it won&#x27;t work</span><br><span class="line">    source =&gt; (&#123;</span><br><span class="line">      count: props.initialCount,</span><br><span class="line">      get multiplied() &#123;</span><br><span class="line">        // you shouldn&#x27;t ever refer to props directly here, it won&#x27;t see a change</span><br><span class="line">        return source.multiplier * store.count</span><br><span class="line">      &#125;,</span><br><span class="line">      inc() &#123;</span><br><span class="line">        store.count += 1</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    props, // note props passed here</span><br><span class="line">  )</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;button id=&quot;inc&quot; onClick=&#123;store.inc&#125;&gt;</span><br><span class="line">        &#123;`Count: $&#123;store.count&#125;`&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &lt;span&gt;&#123;store.multiplied&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="lesson-13mobxä¸redux"><a href="#lesson-13mobxä¸redux" class="headerlink" title="lesson-13mobxä¸redux"></a>lesson-13mobxä¸redux</h3><h4 id="mobx"><a href="#mobx" class="headerlink" title="mobx"></a>mobx</h4><p>å®ƒé€šè¿‡é€æ˜çš„å‡½æ•°å“åº”å¼ç¼–ç¨‹(transparently applying functional reactive programming - TFRP)ä½¿å¾—çŠ¶æ€ç®¡ç†å˜å¾—ç®€å•å’Œå¯æ‰©å±•ã€‚MobXèƒŒåçš„å“²å­¦å¾ˆç®€å•:</p><p><em>ä»»ä½•æºè‡ªåº”ç”¨çŠ¶æ€çš„ä¸œè¥¿éƒ½åº”è¯¥è‡ªåŠ¨åœ°è·å¾—ã€‚</em></p><p><img src="https://cn.mobx.js.org/flow.png" alt="MobX unidirectional flow"></p><h4 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h4><p>Redux æ˜¯ JavaScript çŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/0082zybply1gc57dy6j70j31240netja.jpg" alt="image-20200222151958879"></p><p>Redux é™¤äº†å’Œ <a href="https://facebook.github.io/react/">React</a> ä¸€èµ·ç”¨å¤–ï¼Œè¿˜æ”¯æŒå…¶å®ƒç•Œé¢åº“ã€‚ å®ƒä½“å°ç²¾æ‚ï¼ˆåªæœ‰2kBï¼ŒåŒ…æ‹¬ä¾èµ–ï¼‰ã€‚</p><p>åº”ç”¨ä¸­æ‰€æœ‰çš„ state éƒ½ä»¥ä¸€ä¸ªå¯¹è±¡æ ‘çš„å½¢å¼å‚¨å­˜åœ¨ä¸€ä¸ªå•ä¸€çš„ <em>store</em> ä¸­ã€‚ æƒŸä¸€æ”¹å˜ state çš„åŠæ³•æ˜¯è§¦å‘ <em>action</em>ï¼Œä¸€ä¸ªæè¿°å‘ç”Ÿä»€ä¹ˆçš„å¯¹è±¡ã€‚ ä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state æ ‘ï¼Œä½ éœ€è¦ç¼–å†™ <em>reducers</em>ã€‚</p><h5 id="reduxä¸‰å¤§åŸåˆ™"><a href="#reduxä¸‰å¤§åŸåˆ™" class="headerlink" title="reduxä¸‰å¤§åŸåˆ™"></a>reduxä¸‰å¤§åŸåˆ™</h5><h6 id="å•ä¸€æ•°æ®æº"><a href="#å•ä¸€æ•°æ®æº" class="headerlink" title="å•ä¸€æ•°æ®æº"></a>å•ä¸€æ•°æ®æº</h6><p>æ•´ä¸ªåº”ç”¨çš„ state è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚</p><h6 id="State-æ˜¯åªè¯»çš„"><a href="#State-æ˜¯åªè¯»çš„" class="headerlink" title="State æ˜¯åªè¯»çš„"></a>State æ˜¯åªè¯»çš„</h6><p>å”¯ä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ actionï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚</p><h6 id="ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹"><a href="#ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹" class="headerlink" title="ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹"></a>ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹</h6><p>ä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state tree ï¼Œä½ éœ€è¦ç¼–å†™ reducersã€‚</p><h4 id="ä¸åŒ"><a href="#ä¸åŒ" class="headerlink" title="ä¸åŒ"></a>ä¸åŒ</h4><h5 id="è®¾è®¡æ€æƒ³ä¸åŒ"><a href="#è®¾è®¡æ€æƒ³ä¸åŒ" class="headerlink" title="è®¾è®¡æ€æƒ³ä¸åŒ"></a>è®¾è®¡æ€æƒ³ä¸åŒ</h5><p>Reduxéµå¾ªå‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programming, FPï¼‰æ€æƒ³ï¼Œè€ŒMobXè®¾è®¡æ›´å¤šåå‘äºé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰å’Œå“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ï¼ŒMobXä¸­å°†çŠ¶æ€åŒ…è£…æˆå¯è§‚å¯Ÿå¯¹è±¡ï¼Œå†ä½¿ç”¨å¯è§‚å¯Ÿå¯¹è±¡çš„æ‰€æœ‰èƒ½åŠ›ï¼Œä¸€æ—¦çŠ¶æ€å¯¹è±¡å˜æ›´ï¼Œæ›´æ–°å°±èƒ½è¢«è‡ªåŠ¨è·å¾—ã€‚</p><h5 id="å¯¹storeç®¡ç†çš„ä¸åŒ"><a href="#å¯¹storeç®¡ç†çš„ä¸åŒ" class="headerlink" title="å¯¹storeç®¡ç†çš„ä¸åŒ"></a>å¯¹storeç®¡ç†çš„ä¸åŒ</h5><p>åœ¨Reduxåº”ç”¨ä¸­ï¼Œæ‰€æœ‰å…±äº«çš„åº”ç”¨æ•°æ®éƒ½é›†ä¸­åœ¨ä¸€ä¸ªå¤§çš„storeä¸­ï¼Œè€ŒMboXåˆ™é€šå¸¸æŒ‰æ¨¡å—å°†åº”ç”¨çŠ¶æ€åˆ’åˆ†ï¼Œåœ¨å¤šä¸ªç‹¬ç«‹çš„storeä¸­ç®¡ç†ã€‚</p><h5 id="å·¥ä½œæ–¹å¼ä¸åŒ"><a href="#å·¥ä½œæ–¹å¼ä¸åŒ" class="headerlink" title="å·¥ä½œæ–¹å¼ä¸åŒ"></a>å·¥ä½œæ–¹å¼ä¸åŒ</h5><p>Reduxä¸­ç”¨jså¯¹è±¡å­˜å‚¨çŠ¶æ€æ•°æ®ï¼Œå¹¶ä¸”æ‰‹åŠ¨è¿½è¸ªçŠ¶æ€å˜æ›´ï¼Œè€ŒMobXä¸­ä¼šæŠŠçŠ¶æ€æ•°æ®è½¬åŒ–ä¸ºå¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œè‡ªåŠ¨è§¦å‘ç›‘å¬ã€‚</p><h5 id="çŠ¶æ€ä¿®æ”¹æ–¹å¼"><a href="#çŠ¶æ€ä¿®æ”¹æ–¹å¼" class="headerlink" title="çŠ¶æ€ä¿®æ”¹æ–¹å¼"></a>çŠ¶æ€ä¿®æ”¹æ–¹å¼</h5><p>Reduxä¸­çš„ä¸å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œåªèƒ½é€šè¿‡dispatchæ´¾å‘äº‹ä»¶ä¿®æ”¹ï¼Œè€ŒMobXä¸­åˆ™å¯ä»¥ç›´æ¥ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡actionä¿®æ”¹ï¼Œæ¯”è¾ƒâ€çµæ´»â€œï¼Œä½†æ˜¯è¿™ç§çµæ´»ä¸åˆ©äºé¡¹ç›®ç®¡ç†ä¸ç»´æŠ¤ï¼Œå› æ­¤å»ºè®®è¿˜æ˜¯å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œä»è€Œç¦æ­¢æ‰ç›´æ¥ä¿®æ”¹çŠ¶æ€çš„æ–¹å¼ï¼Œå¹¶ä¸”åˆ¶å®šçŠ¶æ€ç®¡ç†è§„èŒƒã€‚</p><h5 id="ä¸å¯å˜ï¼ˆImmutableï¼‰å’Œå¯å˜ï¼ˆMutableï¼‰"><a href="#ä¸å¯å˜ï¼ˆImmutableï¼‰å’Œå¯å˜ï¼ˆMutableï¼‰" class="headerlink" title="ä¸å¯å˜ï¼ˆImmutableï¼‰å’Œå¯å˜ï¼ˆMutableï¼‰"></a>ä¸å¯å˜ï¼ˆImmutableï¼‰å’Œå¯å˜ï¼ˆMutableï¼‰</h5><p>ReduxçŠ¶æ€å¯¹è±¡é€šå¸¸æ˜¯ä¸å¯å˜çš„ï¼ˆImmutableï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨reducersï¼Œå¹¶ä¸”åœ¨åŸæ¥å¯¹è±¡çš„åŸºç¡€ä¸Šè¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡ï¼Œè¿™æ ·å°±èƒ½å¾ˆæ–¹ä¾¿çš„è¿”å›ä¸Šä¸€ä¸ªçŠ¶æ€ï¼Œä½†æ˜¯MobXä¸­åˆ™å¯ç”±ç›´æ¥ä½¿ç”¨æ–°å€¼æ›´æ–°çŠ¶æ€å¯¹è±¡ã€‚</p><h5 id="mobx-reactå’Œreact-reudx"><a href="#mobx-reactå’Œreact-reudx" class="headerlink" title="mobx-reactå’Œreact-reudx"></a>mobx-reactå’Œreact-reudx</h5><p>å„è‡ªéƒ½æœ‰Reactç»‘å®šåº“ï¼Œä¸”ç»‘å®šåº“è®¾è®¡ä¸æ€æƒ³ç›¸ä¼¼ï¼Œreact-reduxä¸­æœ‰Providerä¸connectï¼Œmobx-reactä¸­æœ‰Providerå’Œinjectï¼Œéƒ½æœ‰Contextå’ŒHOCè®¾è®¡ï¼ŒåæœŸéƒ½å¯ä»¥ç”¨hooksä»£æ›¿ã€‚</p><h5 id="ä½“ç§¯ä¸åŒ"><a href="#ä½“ç§¯ä¸åŒ" class="headerlink" title="ä½“ç§¯ä¸åŒ"></a>ä½“ç§¯ä¸åŒ</h5><p>Reduxä½“å°ç²¾æ‚ã€å‘¨è¾¹é…åˆåº“éå¸¸ä¸°å¯Œï¼Œå¦‚redux-thunkä¸­é—´ä»¶ç­‰ã€‚mobxåº“åˆ™åŠŸèƒ½å¼ºå¤§ï¼Œè‡ªå·±å°±èƒ½ç‹¬ç«‹å®Œæˆå¾ˆå¤šåŠŸèƒ½ï¼Œå¦‚å¼‚æ­¥ç­‰ã€‚</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>å¦‚æœä½ ä¸æ‡‚Reduxä¸­çš„reducersã€ä¸­é—´ä»¶ç­‰è¿™äº›æ¦‚å¿µï¼Œ<code>MobX</code>å…¥é—¨ä¹Ÿè®¸ç›¸å¯¹ç®€å•ï¼Œæ„å»ºé¡¹ç›®å½“ç„¶ä¹Ÿå¾ˆå¿«ï¼Œä½†æ˜¯å½“é¡¹ç›®è¶³å¤Ÿå¤§çš„æ—¶å€™ï¼Œå…¶å®éš¾åº¦ä¸ä¼šå¤©å·®åœ°åˆ«ï¼Œéƒ½éœ€è¦å¼€å‘è€…å¯¹åº“æœ¬èº«èƒ½æœ‰æ·±åˆ»çš„ç†è§£ã€‚ç›®å‰æ›´å¤šäººé€‰æ‹©ä½¿ç”¨Reduxï¼Œå°¤å…¶æ˜¯å¤§å‹é¡¹ç›®ï¼Œè€Œé€‰æ‹©MobXçš„åˆ™ä¸­å°å‹é¡¹ç›®å¤šä¸€äº›ï¼ŒMobXå¥½ç†è§£ã€è‡ªç”±ï¼Œè¿™å½“ç„¶æ˜¯ä¸ªä¼˜åŠ¿ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿå¸¦æ¥äº†åŠ£åŠ¿ï¼Œè¿‡äºè‡ªç”±å¯¹äºé¡¹ç›®ç®¡ç†å½“ç„¶æ˜¯å·¨å¤§çš„ç¼ºç‚¹ï¼Œå› æ­¤ä½¿ç”¨MobXéœ€è¦å¼€å‘è€…çº¦å®šè§„èŒƒã€‚æ‰€ä»¥ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºï¼Œé€‰æ‹©MobXè¿˜æ˜¯Reduxç”¨äºçŠ¶æ€ç®¡ç†ï¼Œæˆ–è€…ä½ æœ‰ç¬¬ä¸‰ç¬¬å››ä¸ªåˆ«çš„é€‰æ‹©ï¼Œæ ¹æ®è‡ªå·±çš„é¡¹ç›®å’Œä¸ªäººå¯¹äºå„è‡ªåº“çš„æŒæ¡åº¦æ¥åšé€‰æ‹©å°±å¯ä»¥äº†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MobXæ–‡æ¡£&quot;&gt;&lt;a href=&quot;#MobXæ–‡æ¡£&quot; class=&quot;headerlink&quot; title=&quot;MobXæ–‡æ¡£&quot;&gt;&lt;/a&gt;MobXæ–‡æ¡£&lt;/h1&gt;&lt;h2 id=&quot;èµ„æº&quot;&gt;&lt;a href=&quot;#èµ„æº&quot; class=&quot;headerlink&quot; title=&quot;èµ„æº&quot;&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>regular-expression</title>
    <link href="http://example.com/2021/10/08/regular-expression/"/>
    <id>http://example.com/2021/10/08/regular-expression/</id>
    <published>2021-10-08T00:00:00.000Z</published>
    <updated>2021-11-08T16:15:04.548Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ­£åˆ™å¸¸å¸¸ç”¨æ¥ç®€åŒ–æ–‡æœ¬å¤„ç†çš„é€»è¾‘ã€‚åœ¨ Linux å‘½ä»¤ä¸­ï¼Œå®ƒä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬è½»æ¾åœ°æŸ¥æ‰¾æˆ–ç¼–è¾‘æ–‡ä»¶çš„å†…å®¹ï¼Œç”šè‡³å®ç°æ•´ä¸ªæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹æ›¿æ¢ï¼Œæ¯”å¦‚ grepã€egrepã€sedã€awkã€vim ç­‰ã€‚å¦å¤–ï¼Œåœ¨å„ç§æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œæ¯”å¦‚ Atomï¼ŒSublime Text æˆ– VS Code ç­‰ï¼Œåœ¨æŸ¥æ‰¾æˆ–æ›¿æ¢çš„æ—¶å€™ä¹Ÿä¼šä½¿ç”¨åˆ°å®ƒã€‚æ€»ä¹‹ï¼Œæ­£åˆ™æ˜¯æ— å¤„ä¸åœ¨çš„ï¼Œå·²ç»æ¸—é€åˆ°äº†æ—¥å¸¸å·¥ä½œçš„æ–¹æ–¹é¢é¢ã€‚</p><h3 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><p>æ­£åˆ™è¡¨è¾¾å¼è§£å†³æµç¨‹</p><p><strong>ç¬¬ä¸€æ­¥,åšåˆ†è§£</strong>ã€‚æ‹¿åˆ°ä¸€ä¸ªé—®é¢˜åï¼Œæˆ‘ä»¬è¦å…ˆæ€è€ƒï¼šè¿™ä¸ªé—®é¢˜å¯ä»¥åˆ†ä¸ºå‡ ä¸ªå­é—®é¢˜ï¼Ÿæ¯ä¸ªå­é—®é¢˜æ˜¯å¦ç‹¬ç«‹ï¼Ÿæˆ‘ä»¬æ‹¿æœ€å¸¸è§çš„ç”µå­é‚®ä»¶åœ°å€åŒ¹é…æ¥è¯´ã€‚ä»æ–‡æœ¬ç»“æ„æ¥çœ‹ï¼Œå®ƒå¯ä»¥åˆ†ä¸ºâ€œusername + @ + domain nameâ€è¿™ä¸‰ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ã€‚æ€ä¹ˆç”»å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å…ˆç”»å‡ºé€»è¾‘ç»“æ„å›¾ã€‚é€šè¿‡è¿™ä¸ªè¿‡ç¨‹æ¥å˜æ¸…æ€è·¯ã€‚å½“ç„¶ï¼Œè¿™æ˜¯è½¯ä»¶â¼¯ç¨‹æœ€åŸºæœ¬çš„æ€è·¯ï¼Œç›¸ä¿¡ä½ åšèµ·æ¥åº”è¯¥é—®é¢˜ä¸å¤§ã€‚</p><p><strong>ç¬¬äºŒéƒ¨ï¼Œåˆ†æå„ä¸ªå­é—®é¢˜</strong>ã€‚æŸä¸ªä½ç½®ä¸Šå¯èƒ½æœ‰å¤šä¸ªå­—ç¬¦ï¼Ÿé‚£å°±ç”¨å­—ç¬¦ç»„ã€‚æŸä¸ªä½ç½®ä¸Šå¯èƒ½æœ‰å¤šä¸ªå­—ç¬¦ä¸²ï¼Ÿé‚£å°±ç”¨å¤šé€‰ç»“æ„ã€‚å‡ºç°çš„æ¬¡æ•°ä¸ç¡®å®šï¼Ÿé‚£å°±ç”¨é‡è¯ã€‚å¯¹å‡ºç°çš„ä½ç½®æœ‰è¦æ±‚ï¼Ÿé‚£å°±ç”¨é”šç‚¹é”å®šä½ç½®â€¦â€¦ æŸç§ç¨‹åº¦ä¸Šï¼Œè¿™å°±åƒæ­¦æœ¯é‡Œçš„è§æ‹›æ‹†æ‹›ï¼Œæ¯ä¸ªé—®é¢˜éƒ½æœ‰å¯¹åº”çš„è§£æ³•ï¼Œåªè¦ç†Ÿç»ƒæŒæ¡äº†ï¼ŒçŸ¥é“ä»€ä¹ˆæ—¶å€™ç”¨å­—ç¬¦ç»„ï¼Œä»€ä¹ˆæ—¶å€™ç”¨å¤šé€‰ç»“æ„ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è¯ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é”šç‚¹ï¼Œå°±å¾ˆå®¹æ˜“æ­å»ºèµ·å®Œæ•´çš„æ¦‚å¿µæ¨¡å‹ã€‚</p><p><strong>ç¬¬ä¸‰éƒ¨ï¼Œå¥—çš®</strong>ã€‚ä½ å¤§æ¦‚æ³¨æ„åˆ°äº†ï¼Œåˆ°ç°åœ¨ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è°ˆè®ºæ­£åˆ™è¡¨è¾¾å¼çš„å…¸å‹æ ‡å¿—ï¼Œæ¯”å¦‚æ–¹æ‹¬å·ã€æ˜Ÿå·ã€èŠ±æ‹¬å·ã€‚è¦çŸ¥é“ï¼Œè¿™äº›å…¸å‹æ ‡å¿—æ— éåªæ˜¯ä¸€äº›ç¬¦å·è€Œå·²ï¼ŒçœŸæ­£é‡è¦çš„æ˜¯å­—ç¬¦ç»„ã€å¤šé€‰ç»“æ„ã€é‡è¯ç­‰ç­‰è¿™äº›æ¦‚å¿µã€‚ä¸€æ—¦ä½ çš„æ¦‚å¿µæ¨¡å‹æ¸…æ¥šäº†ï¼Œå†™å‡ºæ­£åˆ™è¡¨è¾¾å¼å°±éå¸¸ç®€å•äº†ï¼Œæ— éæ˜¯æŸ¥é˜…è¯­æ³•æ‰‹å†Œï¼ŒæŠŠä¹‹å‰å¾—åˆ°çš„æ¦‚å¿µæ¨¡å‹æŒ‰ç…§å¯¹åº”è¯­è¨€æˆ–å·¥å…·çš„çº¦å®šå†™ä¸‹æ¥è€Œå·²ã€‚è®¸å¤šäººè§‰å¾—æ­£åˆ™è¡¨è¾¾å¼éš¾æ‡‚ï¼Œæ€»æ˜¯çº ç¼ äºâ€œè¿™é‡Œä¸ºä»€ä¹ˆè¦å¤šä¸€ä¸ªæ˜Ÿå·ï¼Ÿé‚£é‡Œä¸ºä»€ä¹ˆæ˜¯æ–¹æ‹¬å·è€Œä¸æ˜¯èŠ±æ‹¬å·ï¼Ÿâ€ï¼ŒåŸå› æ°æ°åœ¨äºå¯¹æ¦‚å¿µæ¨¡å‹ä¸æ¸…æ¥šã€‚è™½ç„¶å„ç§è¯­è¨€æˆ–å·¥å…·å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æ”¯æŒå¤§åŒå°å¼‚ï¼Œä½†ç»†å¾®å·®åˆ«ä»ç„¶ä¸å¯å¿½è§†ã€‚ä¸è¿‡åªè¦ä½ å¿ƒæ€€æ­£å¿µï¼Œæ´è‹¥è§‚ç«ï¼Œè¿™äº›å·®å¼‚å…¶å®å¹¶ä¸æ˜¯å¤§é—®é¢˜ã€‚</p><p><strong>ç¬¬å››æ­¥,è°ƒè¯•</strong>ã€‚å¾ˆå¤šäººéƒ½è¯´ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„éº»çƒ¦ä¹‹å¤„åœ¨äºå®ƒåƒä¸ªé»‘ç®±å­ï¼Œå¾ˆéš¾è°ƒè¯•ï¼Œè¿„ä»Šä¸ºæ­¢ä»ç„¶æ²¡æœ‰ç‰¹åˆ«å¥½ç”¨çš„â¼¯å…·ï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æ³•â¼€æ­¥æ­¥è·Ÿè¿›å»çœ‹åŒ¹é…çš„å…·ä½“è¿‡ç¨‹ï¼Œåªèƒ½ç¬¼ç»Ÿåœ°çŸ¥é“â€œåŒ¹é…äº†â€æˆ–è€…â€œæ²¡åŒ¹é…â€ã€‚</p><h3 id="ä¹¦å†™æ³¨æ„äº‹é¡¹"><a href="#ä¹¦å†™æ³¨æ„äº‹é¡¹" class="headerlink" title="ä¹¦å†™æ³¨æ„äº‹é¡¹"></a>ä¹¦å†™æ³¨æ„äº‹é¡¹</h3><p><strong>ç¬¬â¼€ï¼Œèƒ½ç”¨æ™®é€šå­—ç¬¦ä¸²å¤„ç†çš„ï¼Œåšå†³â½¤æ™®é€šå­—ç¬¦ä¸²å¤„ç†</strong>ã€‚å­—ç¬¦ä¸²å¤„ç†çš„é€Ÿåº¦ä¸è§å¾—å·®ï¼Œå¯è¯»æ€§å´å¥½ä¸Šå¾ˆå¤šã€‚å¦‚æœè¦åœ¨å¤§æ®µæ–‡æœ¬ä¸­å®šä½æ‰€æœ‰çš„ today æˆ–è€… tomorrowï¼Œç”¨æœ€ç®€å•çš„å­—ç¬¦ä¸²æŸ¥æ‰¾ï¼Œç›´æ¥æ‰¾ä¸¤éï¼Œæ˜æ˜¾æ¯” to(day|morrow) çœ‹èµ·æ¥æ›´æ¸…æ¥šã€‚</p><p><strong>ç¬¬â¼†ï¼Œèƒ½å†™æ³¨é‡Šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œâ¼€å®šè¦å†™æ³¨é‡Š</strong>ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•éå¸¸å¤è€ï¼Œä¸å¤Ÿç›´è§‚ï¼Œä¸ºäº†ä¾¿äºé˜…è¯»å’Œç»´æŠ¤ï¼Œå¦‚ä»Šå¤§éƒ¨åˆ†è¯­è¨€é‡Œéƒ½å¯ä»¥é€šè¿‡ x æ‰“å¼€æ³¨é‡Šæ¨¡å¼ã€‚æœ‰äº†æ³¨é‡Šï¼Œå¤æ‚æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æ„ä¹Ÿèƒ½ä¸€ç›®äº†ç„¶ã€‚</p><p><strong>ç¬¬ä¸‰ï¼Œèƒ½ç”¨å¤šä¸ªç®€å•æ­£åˆ™è¡¨è¾¾å¼è§£å†³çš„ï¼Œâ¼€å®šä¸è¦è‹›æ±‚ç”¨ä¸€ä¸ªå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼</strong>ã€‚è¿™é‡Œæœ€æ˜æ˜¾çš„ä¾‹å­å°±æ˜¯è¾“å…¥æ¡ä»¶çš„éªŒè¯ã€‚æ¯”å¦‚è¯´ï¼Œå¸¸è§çš„å¯†ç è¦æ±‚â€œå¿…é¡»åŒ…å«æ•°å­—ã€å°å†™å­—æ¯ã€å¤§å†™å­—æ¯ã€ç‰¹æ®Šç¬¦å·ä¸­çš„è‡³å°‘ä¸¤ç§ï¼Œä¸”é•¿åº¦åœ¨ 8 åˆ° 16 ä¹‹é—´â€ã€‚</p><h3 id="å…ƒå­—ç¬¦çš„æ¦‚å¿µ"><a href="#å…ƒå­—ç¬¦çš„æ¦‚å¿µ" class="headerlink" title="å…ƒå­—ç¬¦çš„æ¦‚å¿µ"></a>å…ƒå­—ç¬¦çš„æ¦‚å¿µ</h3><p>å…ƒå­—ç¬¦å°±æ˜¯æŒ‡é‚£äº›åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„ä¸“ç”¨å­—ç¬¦</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gune2cb9mej60i80o7abf02.jpg" alt="image-20210920205711717"></p><h3 id="è´ªå©ªæ¨¡å¼"><a href="#è´ªå©ªæ¨¡å¼" class="headerlink" title="è´ªå©ªæ¨¡å¼"></a>è´ªå©ªæ¨¡å¼</h3><p><strong>å®šä¹‰</strong>ï¼šè¡¨ç¤ºæ¬¡æ•°çš„é‡è¯ï¼Œå°½å¯èƒ½æœ€å¤§é•¿åº¦å»åŒ¹é…å­—ç¬¦ä¸²</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> regex = <span class="regexp">/a*/g</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;aaabb&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> array = [...str.matchAll(regexp)];</span><br><span class="line"><span class="built_in">console</span>.log(array)</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹:</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsx1r8lhb8j30om04k757.jpg" alt="image-20210728224622226"></p><p>ä½¿ç”¨ a* åœ¨ aaabb è¿™ä¸ªå­—ç¬¦ä¸²ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¿™æ¬¡æˆ‘ä»¬çœ‹åˆ°å¯ä»¥æ‰¾åˆ° 4 ä¸ªåŒ¹é…ç»“æœ</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsx1x70sjgj30gy086dg9.jpg" alt="image-20210728225205119"></p><p>a* åœ¨åŒ¹é…å¼€å¤´çš„ a æ—¶ï¼Œä¼šå°è¯•å°½é‡åŒ¹é…æ›´å¤šçš„ aï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå­—æ¯ b ä¸æ»¡è¶³è¦æ±‚ä¸ºæ­¢ï¼ŒåŒ¹é…ä¸Šä¸‰ä¸ª aï¼Œåé¢æ¯æ¬¡åŒ¹é…æ—¶éƒ½å¾—åˆ°äº†ç©ºå­—ç¬¦ä¸²ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gunej0p277j60f107fgly02.jpg" alt="image-20210920211316195"></p><p>regex = â€œxy{1,3}zâ€</p><p>text = â€œxyyzâ€</p><p>åœ¨åŒ¹é…æ—¶ï¼Œy{1,3}ä¼šå°½å¯èƒ½é•¿åœ°å»åŒ¹é…ï¼Œå½“åŒ¹é…å®Œ xyy åï¼Œç”±äº y è¦å°½å¯èƒ½åŒ¹é…æœ€é•¿ï¼Œå³ä¸‰ä¸ªï¼Œä½†å­—ç¬¦ä¸²ä¸­åé¢æ˜¯ä¸ª z å°±ä¼šå¯¼è‡´åŒ¹é…ä¸ä¸Šï¼Œè¿™æ—¶å€™æ­£åˆ™å°±ä¼šå‘å‰å›æº¯ï¼Œåå‡ºå½“å‰å­—ç¬¦ zï¼Œæ¥ç€ç”¨æ­£åˆ™ä¸­çš„ z å»åŒ¹é…ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gt1jicfk3xj30hh06zaaa.jpg" alt="image-20210801200251574"></p><h3 id="éè´ªå©ªæ¨¡å¼"><a href="#éè´ªå©ªæ¨¡å¼" class="headerlink" title="éè´ªå©ªæ¨¡å¼"></a>éè´ªå©ªæ¨¡å¼</h3><p><strong>å®šä¹‰</strong>ï¼šâ€æ•°é‡â€å…ƒå­—ç¬¦ååŠ ?,æ‰¾å‡ºé•¿åº¦æœ€å°ä¸”æ»¡è¶³è¦æ±‚çš„çš„å­—ç¬¦ä¸²ï¼Œ å°½å¯èƒ½çŸ­åœ°å»åŒ¹é…å­—ç¬¦ä¸²</p><p>regex = â€œxy{1,3}?zâ€</p><p>text = â€œxyyzâ€</p><p>ç”±äº y{1,3}? ä»£è¡¨åŒ¹é… 1 åˆ° 3 ä¸ª yï¼Œå°½å¯èƒ½å°‘åœ°åŒ¹é…ã€‚åŒ¹é…ä¸Šä¸€ä¸ª y ä¹‹åï¼Œä¹Ÿå°±æ˜¯åœ¨åŒ¹é…ä¸Š text ä¸­çš„ xy åï¼Œæ­£åˆ™ä¼šä½¿ç”¨ z å’Œ text ä¸­çš„ xy åé¢çš„ y æ¯”è¾ƒï¼Œå‘ç°æ­£åˆ™ z å’Œ y ä¸åŒ¹é…ï¼Œè¿™æ—¶æ­£åˆ™å°±ä¼šå‘å‰å›æº¯ï¼Œé‡æ–°æŸ¥çœ‹ y åŒ¹é…ä¸¤ä¸ªçš„æƒ…å†µï¼ŒåŒ¹é…ä¸Šæ­£åˆ™ä¸­çš„ xyyï¼Œç„¶åå†ç”¨ z å»åŒ¹é… text ä¸­çš„ zï¼ŒåŒ¹é…æˆåŠŸã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gt1jh4ead2j30g806jjro.jpg" alt="image-20210801200140585"></p><h3 id="ç‹¬å æ¨¡å¼"><a href="#ç‹¬å æ¨¡å¼" class="headerlink" title="ç‹¬å æ¨¡å¼"></a>ç‹¬å æ¨¡å¼</h3><p>ä¸ç®¡æ˜¯è´ªå©ªæ¨¡å¼ï¼Œè¿˜æ˜¯éè´ªå©ªæ¨¡å¼ï¼Œéƒ½éœ€è¦å‘ç”Ÿå›æº¯æ‰èƒ½å®Œæˆç›¸åº”çš„åŠŸèƒ½ï¼Œä½†æ˜¯åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦å›æº¯ï¼ŒåŒ¹é…ä¸ä¸Šè¿”å›å¤±è´¥å°±å¥½äº†ï¼Œç‹¬å æ¨¡å¼ç±»ä¼¼è´ªå©ªåŒ¹é…ï¼Œä½†åŒ¹é…è¿‡ç¨‹ä¸ä¼šå‘ç”Ÿå›æº¯ã€‚å…·ä½“æ–¹æ³•åœ¨é‡è¯åé¢åŠ ä¸ŠåŠ å·(+)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.findall(<span class="string">&#x27;xy&#123;1,3&#125;+yz&#x27;</span>,<span class="string">&#x27;xyyz&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä¸è¿‡åœ¨pythonä¸­ä¼šæŠ¥é”™(ç›®å‰pythonå’Œgoæ ‡å‡†åº“å¹¶ä¸æ”¯æŒç‹¬å æ¨¡å¼) åŠ å·ä¼šè¢«ç¨‹åºè®¤ä¸ºæ˜¯é‡å¤æ¬¡æ•°çš„å…ƒå­—ç¬¦</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gt1akx83trj30u009ijsw.jpg" alt="image-20210801145354310"></p><p>å¯ä»¥å®‰è£…regexæ¨¡å—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> regex</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>regex.findall(<span class="string">r&#x27;xy&#123;1,3&#125;z&#x27;</span>, <span class="string">&#x27;xyyz&#x27;</span>)  <span class="comment"># è´ªå©ªæ¨¡å¼</span></span><br><span class="line">[<span class="string">&#x27;xyyz&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>regex.findall(<span class="string">r&#x27;xy&#123;1,3&#125;+z&#x27;</span>, <span class="string">&#x27;xyyz&#x27;</span>) <span class="comment"># ç‹¬å æ¨¡å¼</span></span><br><span class="line">[<span class="string">&#x27;xyyz&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>regex.findall(<span class="string">r&#x27;xy&#123;1,2&#125;+yz&#x27;</span>, <span class="string">&#x27;xyyz&#x27;</span>) <span class="comment"># ç‹¬å æ¨¡å¼</span></span><br><span class="line">[]</span><br></pre></td></tr></table></figure><table><thead><tr><th></th><th>æ­£åˆ™</th><th>æ–‡æœ¬</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>è´ªå©ªæ¨¡å¼</td><td>x{1,3}xy</td><td>xxxy</td><td>åŒ¹é…</td></tr><tr><td>éè´ªå©ªæ¨¡å¼</td><td>x{1,3}?xy</td><td>xxxy</td><td>åŒ¹é…</td></tr><tr><td>ç‹¬å æ¨¡å¼</td><td>x{1,3}+xy</td><td>xxxy</td><td>ä¸åŒ¹é…</td></tr></tbody></table><p>å¦‚æœç”¨x{1,3}+xyå»åŒ¹é…xxxyå­—ç¬¦ä¸²ï¼Œx{1,3}ä¼šæŠŠå‰é¢ä¸‰ä¸ªxéƒ½ç”¨æ‰,é‚£æ–‡æœ¬ä¸­åªå‰©ä¸‹ä¸€ä¸ªyï¼Œæ­£åˆ™+åé¢çš„xæ— æ³•åŒ¹é…ï¼Œå¯¼è‡´åŒ¹é…å¤±è´¥ã€‚</p><p><strong>é€ æˆå›æº¯çš„æ¡ä»¶</strong></p><ul><li>å¤šåˆ†æç»“æ„</li><li>é‡è¯</li></ul><h3 id="åˆ†ç»„ä¸å¼•ç”¨"><a href="#åˆ†ç»„ä¸å¼•ç”¨" class="headerlink" title="åˆ†ç»„ä¸å¼•ç”¨"></a>åˆ†ç»„ä¸å¼•ç”¨</h3><p>åˆ†ç»„ç”¨æ‹¬å·æ‹¬èµ·</p><ul><li>å¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ•´ä½“</li><li>å¤ç”¨</li></ul><h4 id="åˆ†ç»„ä¸ç¼–å·"><a href="#åˆ†ç»„ä¸ç¼–å·" class="headerlink" title="åˆ†ç»„ä¸ç¼–å·"></a>åˆ†ç»„ä¸ç¼–å·</h4><p>æ‹¬å·åœ¨æ­£åˆ™ä¸­å¯ä»¥ç”¨äºåˆ†ç»„ï¼Œè¢«æ‹¬å·æ‹¬èµ·æ¥çš„éƒ¨åˆ†â€å­è¡¨è¾¾å¼â€œä¼šè¢«ä¿å­˜æˆä¸€ä¸ªå­ç»„ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gt1mz7ebksj30h605jq2z.jpg" alt="image-20210801220251264"></p><p>å¦‚æœæ‹¬å·åµŒå¥—çš„è¯ï¼Œåªéœ€è¦æ•°å·¦æ‹¬å·æ˜¯ç¬¬å‡ ä¸ªï¼Œå°±å¯ä»¥ç¡®å®šæ˜¯ç¬¬å‡ ä¸ªå­ç»„</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gt1n39gosfj30g503owej.jpg" alt="image-20210801220645844"></p><p>ä¸ä¿å­˜å­ç»„å¯ä»¥æé«˜æ­£åˆ™æ€§èƒ½ åœ¨æ‹¬å·é‡Œé¢åŠ ?:</p><p>ä¿å­˜å­ç»„åç»­å¯ä»¥ç»§ç»­ä½¿ç”¨</p><h4 id="å‘½ååˆ†ç»„"><a href="#å‘½ååˆ†ç»„" class="headerlink" title="å‘½ååˆ†ç»„"></a>å‘½ååˆ†ç»„</h4><p>å‰é¢æˆ‘ä»¬è®²äº†åˆ†ç»„ç¼–å·ï¼Œä½†ç”±äºç¼–å·å¾—æ•°åœ¨ç¬¬å‡ ä¸ªä½ç½®ï¼Œåç»­å¦‚æœå‘ç°æ­£åˆ™æœ‰é—®é¢˜ï¼Œæ”¹åŠ¨äº†æ‹¬å·çš„ä¸ªæ•°ï¼Œè¿˜å¯èƒ½å¯¼è‡´ç¼–å·å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¸€äº›ç¼–ç¨‹è¯­è¨€æä¾›äº†å‘½ååˆ†ç»„ï¼ˆnamed groupingï¼‰ï¼Œè¿™æ ·å’Œæ•°å­—ç›¸æ¯”æ›´å®¹æ˜“è¾¨è¯†ï¼Œä¸å®¹æ˜“å‡ºé”™ã€‚å‘½ååˆ†ç»„çš„æ ¼å¼ä¸º(?P&lt;åˆ†ç»„å&gt;æ­£åˆ™)</p><table><thead><tr><th>ç¼–ç¨‹è¯­è¨€</th><th>æŸ¥æ‰¾æ—¶å¼•ç”¨æ–¹å¼</th><th>æ›¿æ¢æ—¶å¼•ç”¨æ–¹å¼</th></tr></thead><tbody><tr><td>Python</td><td>\number å¦‚\1</td><td>\number å¦‚\1</td></tr><tr><td>Go</td><td>å®˜æ–¹åŒ…ä¸æ”¯æŒ</td><td>å®˜æ–¹åŒ…ä¸æ”¯æŒ</td></tr><tr><td>Java</td><td>\number å¦‚\1</td><td>$number, å¦‚$1</td></tr><tr><td>JavaScript</td><td>$number,å¦‚$1</td><td>$numberï¼Œå¦‚$1</td></tr><tr><td>PHP</td><td>\number å¦‚\1</td><td>\number å¦‚\1</td></tr><tr><td>Ruby</td><td>\number å¦‚\1</td><td>\number å¦‚\1</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">the little cat cat is <span class="keyword">in</span> the hat hat hat, we like it.</span><br><span class="line"></span><br><span class="line">æŸ¥æ‰¾åŒ¹é…</span><br><span class="line">/(\b\w+\b)(?:\s+\<span class="number">1</span>)+/gm</span><br><span class="line">  </span><br><span class="line">æ›¿æ¢åŒ¹é…</span><br><span class="line">/<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹åˆ†äº«: <a href="https://regex101.com/r/2RVPTJ/2">https://regex101.com/r/2RVPTJ/2</a> </p><h4 id="åŒ¹é…æ¨¡å¼"><a href="#åŒ¹é…æ¨¡å¼" class="headerlink" title="åŒ¹é…æ¨¡å¼"></a>åŒ¹é…æ¨¡å¼</h4><h3 id="åŒ¹é…æ¨¡å¼-1"><a href="#åŒ¹é…æ¨¡å¼-1" class="headerlink" title="åŒ¹é…æ¨¡å¼"></a>åŒ¹é…æ¨¡å¼</h3><p>æ¦‚å¿µ: æ­£åˆ™ä¸­ä¸€äº›æ”¹å˜å…ƒå­—ç¬¦åŒ¹é…è¡Œä¸ºçš„æ–¹å¼</p><h4 id="ä¸åŒºåˆ†å¤§å°å†™æ¨¡å¼"><a href="#ä¸åŒºåˆ†å¤§å°å†™æ¨¡å¼" class="headerlink" title="ä¸åŒºåˆ†å¤§å°å†™æ¨¡å¼"></a>ä¸åŒºåˆ†å¤§å°å†™æ¨¡å¼</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtsa56ct57j60ex05nq2y02.jpg" alt="image-20210824230903544"></p><ol><li>ä¸åŒºåˆ†å¤§å°å†™æ¨¡å¼çš„æŒ‡å®šæ–¹å¼ï¼Œä½¿ç”¨æ¨¡å¼ä¿®é¥°ç¬¦(?i);</li><li>ä¿®é¥°ç¬¦å¦‚æœåœ¨æ‹¬å·å†…ï¼Œä½œç”¨èŒƒå›´æ˜¯è¿™ä¸ªæ‹¬å·å†…çš„æ­£åˆ™ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ­£åˆ™</li><li>ä½¿ç”¨ç¼–ç¨‹è¯­è¨€æ—¶å¯ä»¥ä½¿ç”¨é¢„å®šä¹‰å¥½çš„å¸¸é‡æ¥æŒ‡å®šåŒ¹é…æ¨¡å¼</li><li>åœ¨jsä¸­éœ€è¦ä½¿ç”¨/regex/iæ¥æŒ‡å®šåŒ¹é…æ¨¡å¼ã€‚</li></ol><h4 id="ç‚¹å·é€šé…æ¨¡å¼"><a href="#ç‚¹å·é€šé…æ¨¡å¼" class="headerlink" title="ç‚¹å·é€šé…æ¨¡å¼"></a>ç‚¹å·é€šé…æ¨¡å¼</h4><p>è®©è‹±æ–‡çš„ç‚¹å¯ä»¥åŒ¹é…ä¸ŠåŒ…æ‹¬æ¢è¡Œçš„ä»»ä½•å­—ç¬¦</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtsb75mjxaj60ra04p0sy02.jpg" alt="image-20210824234533681"></p><p><strong>åœ¨jsä¸­ä¸æ”¯æŒè¿™ç§è¯­æ³•ï¼Œå¯ä»¥ç”¨[\s\S]+ä»£æ›¿</strong></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtsb9hlpfrj60r904j0sv02.jpg" alt="image-20210824234748287"></p><h4 id="å¤šè¡ŒåŒ¹é…æ¨¡å¼"><a href="#å¤šè¡ŒåŒ¹é…æ¨¡å¼" class="headerlink" title="å¤šè¡ŒåŒ¹é…æ¨¡å¼"></a>å¤šè¡ŒåŒ¹é…æ¨¡å¼</h4><p>æ¦‚å¿µï¼š^åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´ï¼Œ$ åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„ç»“å°¾ã€‚å¤šè¡ŒåŒ¹é…æ¨¡å¼æ”¹å˜çš„å°±æ˜¯ ^ å’Œ $ çš„åŒ¹é…è¡Œä¸º</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtsbewqh6wj60r70443yk02.jpg" alt="image-20210824235301168"></p><p>å¤šè¡Œæ¨¡å¼çš„ä½œç”¨åœ¨äºï¼Œä½¿ ^ å’Œ $ èƒ½åŒ¹é…ä¸Šæ¯è¡Œçš„å¼€å¤´æˆ–ç»“å°¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡å¼ä¿®é¥°ç¬¦å· (?m) æ¥æŒ‡å®šè¿™ä¸ªæ¨¡å¼ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtsbfuf0qhj60r903vq3202.jpg" alt="image-20210824235354546"></p><h4 id="æ³¨é‡Šæ¨¡å¼"><a href="#æ³¨é‡Šæ¨¡å¼" class="headerlink" title="æ³¨é‡Šæ¨¡å¼"></a>æ³¨é‡Šæ¨¡å¼</h4><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæ­£åˆ™å¯èƒ½ä¼šå¾ˆå¤æ‚ï¼Œè¿™å°±å¯¼è‡´ç¼–å†™ã€é˜…è¯»å’Œç»´æŠ¤æ­£åˆ™éƒ½ä¼šå¾ˆå›°éš¾ã€‚æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šåœ¨ä¸€äº›å…³é”®çš„åœ°æ–¹åŠ ä¸Šæ³¨é‡Šï¼Œè®©ä»£ç æ›´æ˜“äºç†è§£ã€‚å¾ˆå¤šè¯­è¨€ä¹Ÿæ”¯æŒåœ¨æ­£åˆ™ä¸­æ·»åŠ æ³¨é‡Šï¼Œè®©æ­£åˆ™æ›´å®¹æ˜“é˜…è¯»å’Œç»´æŠ¤ï¼Œè¿™å°±æ˜¯æ­£åˆ™çš„æ³¨é‡Šæ¨¡å¼ã€‚æ­£åˆ™ä¸­æ³¨é‡Šæ¨¡å¼æ˜¯ä½¿ç”¨ (?#comment) æ¥è¡¨ç¤º</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtsbpks8apj60qy06n3ys02.jpg" alt="image-20210825000315718"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> template = <span class="string">&#x27;cat cat CAt cAt caT CAT Dog Dog ABC ABC&#x27;</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/((?i)(\w+))(?#word) \1(?#word repeat again)/gm</span></span><br></pre></td></tr></table></figure><h3 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h3><p>ä»€ä¹ˆæ˜¯æ–­è¨€å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œæ–­è¨€æ˜¯æŒ‡å¯¹åŒ¹é…åˆ°çš„æ–‡æœ¬ä½ç½®æœ‰è¦æ±‚ã€‚æ¯”å¦‚\d{11} èƒ½åŒ¹é…ä¸Š 11 ä½æ•°å­—ï¼Œä½†è¿™ 11 ä½æ•°å­—å¯èƒ½æ˜¯ 18 ä½èº«ä»½è¯å·ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å†æ¯”å¦‚ï¼Œå»æŸ¥æ‰¾ä¸€ä¸ªå•è¯ï¼Œæˆ‘ä»¬è¦æŸ¥æ‰¾ tomï¼Œä½†å…¶å®ƒçš„å•è¯ï¼Œæ¯”å¦‚ tomorrow ä¸­ä¹ŸåŒ…å«äº† tomã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯¹è¦åŒ¹é…çš„æ–‡æœ¬çš„ä½ç½®ä¹Ÿæœ‰ä¸€å®šçš„è¦æ±‚ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ­£åˆ™ä¸­æä¾›äº†ä¸€äº›ç»“æ„ï¼Œåªç”¨äºåŒ¹é…ä½ç½®ï¼Œè€Œä¸æ˜¯æ–‡æœ¬å†…å®¹æœ¬èº«ï¼Œè¿™ç§ç»“æ„å°±æ˜¯æ–­è¨€ã€‚å¸¸è§çš„æ–­è¨€æœ‰ä¸‰ç§ï¼šå•è¯è¾¹ç•Œã€è¡Œçš„å¼€å§‹æˆ–ç»“æŸä»¥åŠç¯è§†</p><h4 id="å•è¯è¾¹ç•Œ"><a href="#å•è¯è¾¹ç•Œ" class="headerlink" title="å•è¯è¾¹ç•Œ"></a>å•è¯è¾¹ç•Œ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> template = <span class="string">&#x27;tom asked me if I would go fishing with him tomorrow.&#x27;</span></span><br><span class="line"><span class="comment">//åŒ¹é…tomè¿™ä¸ªå•è¯</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\btom\b/</span></span><br></pre></td></tr></table></figure><p>å•è¯çš„ç»„æˆä¸€èˆ¬å¯ä»¥ç”¨å…ƒå­—ç¬¦ \w+ æ¥è¡¨ç¤ºï¼Œ\w åŒ…æ‹¬äº†å¤§å°å†™å­—æ¯ã€ä¸‹åˆ’çº¿å’Œæ•°å­—ï¼ˆå³ [A-Za-z0-9_]ï¼‰ã€‚é‚£å¦‚æœæˆ‘ä»¬èƒ½æ‰¾å‡ºå•è¯çš„è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯å½“å‡ºç°äº†\w è¡¨ç¤ºçš„èŒƒå›´ä»¥å¤–çš„å­—ç¬¦ï¼Œæ¯”å¦‚å¼•å·ã€ç©ºæ ¼ã€æ ‡ç‚¹ã€æ¢è¡Œç­‰è¿™äº›ç¬¦å·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ­£åˆ™ä¸­ä½¿ç”¨\b æ¥è¡¨ç¤ºå•è¯çš„è¾¹ç•Œã€‚ \b ä¸­çš„ b å¯ä»¥ç†è§£ä¸ºæ˜¯è¾¹ç•Œï¼ˆBoundaryï¼‰è¿™ä¸ªå•è¯çš„é¦–å­—æ¯ã€‚</p><h4 id="è¡Œçš„å¼€å§‹-ç»“æŸ"><a href="#è¡Œçš„å¼€å§‹-ç»“æŸ" class="headerlink" title="è¡Œçš„å¼€å§‹/ç»“æŸ"></a>è¡Œçš„å¼€å§‹/ç»“æŸ</h4><p>å¦‚æœæˆ‘ä»¬è¦æ±‚åŒ¹é…çš„å†…å®¹è¦å‡ºç°åœ¨ä¸€è¡Œæ–‡æœ¬å¼€å¤´æˆ–ç»“å°¾ï¼Œå°±å¯ä»¥ä½¿ç”¨ ^ å’Œ $ æ¥è¿›è¡Œä½ç½®ç•Œå®š</p><ul><li>\A åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œå¯ä»¥åŒ¹é…ä»»æ„è¡Œç»“å°¾ï¼Œä¸æ”¯æŒå¤šè¡Œæ¨¡å¼</li><li>\zä»…åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„ç»“æŸï¼Œä¸æ”¯æŒå¤šè¡Œæ¨¡å¼</li></ul><p>åº”ç”¨: </p><p><strong>æ—¥å¿—èµ·å§‹è¡Œçš„åˆ¤æ–­</strong> </p><p>æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯æ—¥å¿—æ”¶é›†ï¼Œæˆ‘ä»¬åœ¨æ”¶é›†æ—¥å¿—çš„æ—¶å€™ï¼Œé€šå¸¸å¯ä»¥æŒ‡å®šæ—¥å¿—è¡Œçš„å¼€å§‹è§„åˆ™ï¼Œæ¯”å¦‚ä»¥æ—¶é—´å¼€å¤´ï¼Œé‚£äº›ä¸æ˜¯ä»¥æ—¶é—´å¼€å¤´çš„å¯èƒ½å°±æ˜¯æ‰“å°çš„å †æ ˆä¿¡æ¯ï¼Œæˆ‘ä»¬å°±é€šè¿‡æ—¥æœŸæ—¶é—´å¼€å¤´æ¥åˆ¤æ–­å“ªä¸€è¡Œæ˜¯æ—¥å¿—çš„ç¬¬ä¸€è¡Œï¼Œåœ¨æ—¥æœŸæ—¶é—´åé¢çš„æ—¥å¿—éƒ½å±äºåŒä¸€æ¡æ—¥å¿—ã€‚é™¤éæˆ‘ä»¬çœ‹è§ä¸‹ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„å‡ºç°ï¼Œæ‰æ˜¯ä¸‹ä¸€æ¡æ—¥å¿—çš„å¼€å§‹</p><p> <strong>è¾“å…¥æ•°æ®æ ¡éªŒ</strong></p><p>åœ¨ Web æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å¯¹è¾“å…¥çš„å†…å®¹è¿›è¡Œæ ¡éªŒï¼Œæ¯”å¦‚è¦æ±‚è¾“å…¥ 6 ä½æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ \d{6} æ¥æ ¡éªŒã€‚ä½†ä½ éœ€è¦æ³¨æ„åˆ°ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥çš„æ˜¯ 6 ä½ä»¥ä¸Šçš„æ•°å­—å‘¢ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä¸å»è¦æ±‚ç”¨æˆ·å½•å…¥çš„ 6 ä½æ•°å­—å¿…é¡»æ˜¯è¡Œçš„å¼€å¤´æˆ–ç»“å°¾ï¼Œå°±ç®—éªŒè¯é€šè¿‡äº†ï¼Œç»“æœä¹Ÿå¯èƒ½ä¸å¯¹ã€‚æ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼Œåœ¨ä¸åŠ è¡Œå¼€å§‹å’Œç»“æŸç¬¦å·æ—¶ï¼Œç”¨æˆ·è¾“å…¥äº† 7 ä½æ•°å­—ï¼Œä¹Ÿæ˜¯èƒ½æ ¡éªŒé€šè¿‡çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> template = <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^\d&#123;6&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(template.match(regex));</span><br></pre></td></tr></table></figure><h4 id="ç¯è§†"><a href="#ç¯è§†" class="headerlink" title="ç¯è§†"></a>ç¯è§†</h4><p>ç¯è§†å°±æ˜¯è¦æ±‚åŒ¹é…éƒ¨åˆ†çš„å‰é¢æˆ–åé¢è¦æ»¡è¶³ï¼ˆæˆ–ä¸æ»¡è¶³ï¼‰æŸç§è§„åˆ™ï¼Œæœ‰äº›åœ°æ–¹ä¹Ÿç§°ç¯è§†ä¸ºé›¶å®½æ–­è¨€</p><table><thead><tr><th>æ­£åˆ™</th><th>åç§°</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>(?&lt;=Y)</td><td>è‚¯å®šé€†åºç¯è§†postive-lookbehind</td><td>å·¦è¾¹æ˜¯Y</td><td>(?&lt;=\d)thå·¦è¾¹æ˜¯æ•°å­—çš„thï¼Œèƒ½åŒ¹é…1th</td></tr><tr><td>(?&lt;!Y)</td><td>å¦å®šé€†åºç¯è§†negative-lookbehind</td><td>å·¦è¾¹ä¸æ˜¯Y</td><td>(?&lt;!\d)thå·¦è¾¹ä¸æ˜¯æ•°å­—çš„thï¼Œèƒ½åŒ¹é…health</td></tr><tr><td>(?=Y)</td><td>è‚¯å®šé¡ºåºç¯è§†postive-lookahead</td><td>å³è¾¹æ˜¯Y</td><td>Six(?=\d)å³è¾¹æ˜¯æ•°å­—çš„Six,èƒ½åŒ¹é…Six6</td></tr><tr><td>(?!Y)</td><td>å¦å®šé¡ºåºç¯è§†negative-lookahead</td><td>å³è¾¹ä¸æ˜¯Y</td><td>hi(?!\d) å³è¾¹ä¸æ˜¯æ•°å­—çš„hiï¼Œèƒ½åŒ¹é…high</td></tr></tbody></table><h3 id="è½¬ä¹‰"><a href="#è½¬ä¹‰" class="headerlink" title="è½¬ä¹‰"></a>è½¬ä¹‰</h3><p>â€‹    <strong>ç»´åŸºç™¾ç§‘:</strong> åœ¨è®¡ç®—æœºç§‘å­¦ä¸è¿œç¨‹é€šä¿¡ä¸­ï¼Œå½“è½¬ä¹‰å­—ç¬¦æ”¾åœ¨å­—ç¬¦åºåˆ—ä¸­ï¼Œå®ƒå°†å¯¹å®ƒåç»­çš„å‡ ä¸ªå­—ç¬¦è¿›è¡Œæ›¿ä»£å¹¶è§£é‡Šã€‚é€šå¸¸ï¼Œåˆ¤å®šæŸå­—ç¬¦æ˜¯å¦ä¸ºè½¬ä¹‰å­—ç¬¦ç”±ä¸Šä¸‹æ–‡ç¡®å®šã€‚è½¬ä¹‰å­—ç¬¦å³æ ‡å¿—ç€è½¬ä¹‰åºåˆ—å¼€å§‹çš„é‚£ä¸ªå­—ç¬¦ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gupqct6pe9j612x040aam02.jpg" alt="image-20210922213332770"></p><p>è½¬ä¹‰åºåˆ—é€šå¸¸æœ‰ä¸¤ç§åŠŸèƒ½</p><ol><li>åŠŸèƒ½æ˜¯ç¼–ç æ— æ³•ç”¨å­—æ¯è¡¨ç›´æ¥è¡¨ç¤ºçš„ç‰¹æ®Šæ•°æ®</li><li>ç”¨äºè¡¨ç¤ºæ— æ³•ç›´æ¥é”®ç›˜å½•å…¥çš„å­—ç¬¦(å¦‚å›è½¦ç¬¦)</li></ol><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„è½¬ä¹‰å­—ç¬¦ä»¥åŠå®ƒä»¬çš„å«ä¹‰</p><table><thead><tr><th>è½¬ä¹‰å­—ç¬¦</th><th>æ„ä¹‰</th><th>ASCIIç å€¼(åè¿›åˆ¶)</th></tr></thead><tbody><tr><td>\n</td><td>æ¢è¡Œ(LF)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹ä¸€è¡Œå¼€å¤´</td><td>010</td></tr><tr><td>\r</td><td>å›è½¦(CR)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°æœ¬è¡Œå¼€å¤´</td><td>013</td></tr><tr><td>\t</td><td>æ°´å¹³åˆ¶è¡¨(HT) (è·³åˆ°ä¸‹ä¸€ä¸ªTABä½ç½®)</td><td>009</td></tr><tr><td>\v</td><td>å‚ç›´åˆ¶è¡¨(VT)</td><td>011</td></tr><tr><td>\\</td><td>ä»£è¡¨ä¸€ä¸ªåæ–œçº¿å­—ç¬¦\</td><td>092</td></tr><tr><td>\â€˜</td><td>ä»£è¡¨ä¸€ä¸ªå•å¼•å·(æ’‡å·)å­—ç¬¦</td><td>039</td></tr><tr><td>\â€œ</td><td>ä»£è¡¨ä¸€ä¸ªåŒå¼•å·å­—ç¬¦</td><td>034</td></tr></tbody></table><h4 id="å­—ç¬¦ä¸²è½¬ä¹‰"><a href="#å­—ç¬¦ä¸²è½¬ä¹‰" class="headerlink" title="å­—ç¬¦ä¸²è½¬ä¹‰"></a>å­—ç¬¦ä¸²è½¬ä¹‰</h4><p>å­—ç¬¦ä¸²è½¬ä¹‰ï¼šè¾“å…¥å­—ç¬¦ä¸²åˆ°å­—ç¬¦ä¸²æ–‡æœ¬çš„è¿‡ç¨‹</p><h4 id="æ­£åˆ™è½¬ä¹‰"><a href="#æ­£åˆ™è½¬ä¹‰" class="headerlink" title="æ­£åˆ™è½¬ä¹‰"></a>æ­£åˆ™è½¬ä¹‰</h4><p>æ­£åˆ™æ–‡å­—åˆ°æ­£åˆ™è¡¨è¾¾å¼çš„è¿‡ç¨‹</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtunc1jkkrj6130096glv02.jpg" alt="image-20210827001634487"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ\\\\ä»è¾“å…¥å­—ç¬¦ä¸²åˆ°æ­£åˆ™è¡¨è¾¾å¼ï¼Œå…¶å®æœ‰ä¸¤æ­¥è½¬æ¢è¿‡ç¨‹ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²è½¬ä¹‰å’Œæ­£åˆ™è½¬ä¹‰,å››ä¸ªåæ–œæ \\\,ç»è¿‡ç¬¬ä¸€æ­¥å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå®ƒä»£è¡¨çš„å«ä¹‰æ˜¯ä¸¤ä¸ªåæ–œæ ;è¿™ä¸¤ä¸ªåæ–œæ å†ç»è¿‡ç¬¬äºŒæ­¥æ­£åˆ™è½¬ä¹‰ï¼Œå®ƒå°±å¯ä»¥ä»£è¡¨å•ä¸ªåæ–œæ \äº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const str = &#x27;\\n\n\\&#x27;</span><br><span class="line">const sources = [&#x27;\n&#x27;, &#x27;\\n&#x27;, &#x27;\\\n&#x27;, &#x27;\\\\n&#x27;]</span><br><span class="line">const regs = []</span><br><span class="line"></span><br><span class="line">sources.forEach(s =&gt; regs.push(new RegExp(s, &#x27;g&#x27;)))</span><br><span class="line">regs.forEach(reg =&gt; &#123;</span><br><span class="line">  console.log(&#x27;[current reg] &#x27;, reg)</span><br><span class="line">  let once_match = reg.exec(str)</span><br><span class="line">  console.log(&#x27;[result]&#x27;, once_match)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åœ¨jsä¸­çš„æ‰§è¡Œç»“æœ</p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtuna2hkc5j60eo03uaak02.jpg" alt="image-20210827001438104"  /><ol><li>â€˜\nâ€™    å­—ç¬¦ä¸²è½¬ä¹‰\n(æ¢è¡Œç¬¦) ,åŒ¹é…â€™\\n\n\\â€˜åˆ°ä¸€ä¸ªæ¢è¡Œç¬¦</li><li>â€˜\\nâ€™   å­—ç¬¦ä¸²è½¬ä¹‰â€™\nâ€™(\å’Œn) , æ­£åˆ™è½¬ä¹‰\n(æ¢è¡Œç¬¦) ,åŒ¹é…â€™\\n\n\\â€˜åˆ°ä¸€ä¸ªæ¢è¡Œç¬¦</li><li>â€˜\\\nâ€™  å­—ç¬¦ä¸²è½¬ä¹‰â€™\&#39; \n(\å’Œæ¢è¡Œç¬¦), æ­£åˆ™è½¬ä¹‰\n(æ¢è¡Œç¬¦),åŒ¹é…â€™\\n\n\\â€˜åˆ°ä¸€ä¸ªæ¢è¡Œç¬¦</li><li>â€˜\\\\nâ€™ å­—ç¬¦ä¸²è½¬ä¹‰â€™\\nâ€™ï¼Œæ­£åˆ™è½¬ä¹‰â€™\nâ€™(å­—ç¬¦\å’Œn), åŒ¹é…â€™\\n\n\\â€˜åˆ°ä¸€ä¸ªæ¢è¡Œç¬¦</li></ol><p><strong>ä½¿ç”¨ç¼–ç¨‹è¯­è¨€ä¸­çš„å‡½æ•°æ¶ˆé™¤å…ƒå­—ç¬¦ç‰¹æ®Šå«ä¹‰</strong></p><ul><li>Python re.escape(text)</li><li>Go regexp.QuoteMeta(text)</li><li>Pattern.quote(text)</li><li>PHP greg_quote(text)</li></ul><p>js å°†æ­£åˆ™æ–‡æœ¬å’Œæ­£åˆ™è¡¨è¾¾å¼è½¬æ¢ä¸ºå…¶ä»–ç¼–ç ,è™½èƒ½åŒ¹é…ä½†æ˜¯æ˜¯å…¶ä»–ç¼–ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="built_in">encodeURIComponent</span>(<span class="string">&#x27;\\&#x27;</span>),<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> template1 = <span class="built_in">encodeURIComponent</span>(<span class="string">&#x27;abb\\bb\\aa&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log([...template1.matchAll(reg1)])</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gupshsn6q6j60x4040mxp02.jpg" alt="image-20210922224736203"></p><h3 id="æ­£åˆ™æœ‰å“ªäº›å¸¸è§çš„æµæ´¾åŠå…¶ç‰¹æ€§"><a href="#æ­£åˆ™æœ‰å“ªäº›å¸¸è§çš„æµæ´¾åŠå…¶ç‰¹æ€§" class="headerlink" title="æ­£åˆ™æœ‰å“ªäº›å¸¸è§çš„æµæ´¾åŠå…¶ç‰¹æ€§"></a>æ­£åˆ™æœ‰å“ªäº›å¸¸è§çš„æµæ´¾åŠå…¶ç‰¹æ€§</h3><h4 id="POSIXæµæ´¾"><a href="#POSIXæµæ´¾" class="headerlink" title="POSIXæµæ´¾"></a>POSIXæµæ´¾</h4><p>å®šä¹‰äº†æ­£åˆ™è¡¨è¾¾å¼çš„ä¸¤ç§æ ‡å‡†</p><ul><li><strong>BREæ ‡å‡†</strong>(Basic Regular Expression) åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼</li><li><strong>EREæ ‡å‡†</strong>(Extended Regular Expression æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼)</li></ul><p>æ—©æœŸ BRE ä¸ ERE æ ‡å‡†çš„åŒºåˆ«ä¸»è¦åœ¨äºï¼ŒBRE æ ‡å‡†ä¸æ”¯æŒé‡è¯é—®å·å’ŒåŠ å·ï¼Œä¹Ÿä¸æ”¯æŒå¤šé€‰åˆ†æ”¯ç»“æ„ç®¡é“ç¬¦ã€‚BRE æ ‡å‡†åœ¨ä½¿ç”¨èŠ±æ‹¬å·ï¼Œåœ†æ‹¬å·æ—¶è¦è½¬ä¹‰æ‰èƒ½è¡¨ç¤ºç‰¹æ®Šå«ä¹‰ã€‚BRE æ ‡å‡†ç”¨èµ·æ¥è¿™ä¹ˆä¸çˆ½ï¼Œäºæ˜¯æœ‰äº† ERE æ ‡å‡†ï¼Œåœ¨ä½¿ç”¨èŠ±æ‹¬å·ï¼Œåœ†æ‹¬å·æ—¶ä¸éœ€è¦è½¬ä¹‰äº†ï¼Œè¿˜æ”¯æŒäº†é—®å·ã€åŠ å· å’Œ å¤šé€‰åˆ†æ”¯ã€‚æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„ Linux å‘è¡Œç‰ˆï¼Œå¤§å¤šéƒ½é›†æˆäº† GNU å¥—ä»¶ã€‚GNU åœ¨å®ç° POSIX æ ‡å‡†æ—¶ï¼Œåšäº†ä¸€å®šçš„æ‰©å±•ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç‚¹æ‰©å±•ã€‚GNU BRE æ”¯æŒäº† +ã€?ï¼Œä½†è½¬ä¹‰äº†æ‰è¡¨ç¤ºç‰¹æ®Šå«ä¹‰ï¼Œå³éœ€è¦ç”¨+ã€?è¡¨ç¤ºã€‚GNU BRE æ”¯æŒç®¡é“ç¬¦å¤šé€‰åˆ†æ”¯ç»“æ„ï¼ŒåŒæ ·éœ€è¦è½¬ä¹‰ï¼Œå³ç”¨ |è¡¨ç¤ºã€‚GNU ERE ä¹Ÿæ”¯æŒä½¿ç”¨åå¼•ç”¨ï¼Œå’Œ BRE ä¸€æ ·ï¼Œä½¿ç”¨ \1ã€\2â€¦\9 è¡¨ç¤ºã€‚BRE æ ‡å‡†å’Œ ERE æ ‡å‡†çš„è¯¦ç»†åŒºåˆ«ï¼Œæˆ‘ç»™äº†ä½ ä¸€ä¸ªå‚è€ƒå›¾ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œæµ…é»„è‰²èƒŒæ™¯æ˜¯ BRE å’Œ ERE ä¸åŒçš„åœ°æ–¹ï¼Œä¸‰å¤„å¤©è“è‰²å­—ä½“æ˜¯ GNU æ‰©å±•ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gupsrccstoj60gs094dgc02.jpg" alt="image-20210922225647356"></p><p><strong>POSIXå­—ç¬¦ç»„</strong></p><p>POSIX æµæ´¾è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åœ°æ–¹ï¼Œå°±æ˜¯æœ‰è‡ªå·±çš„å­—ç¬¦ç»„ï¼Œå« POSIX å­—ç¬¦ç»„ã€‚è¿™ä¸ªç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„ \d è¡¨ç¤ºæ•°å­—ï¼Œ\s è¡¨ç¤ºç©ºç™½ç¬¦ç­‰ï¼ŒPOSIX ä¸­ä¹Ÿå®šä¹‰äº†ä¸€ç³»åˆ—çš„å­—ç¬¦ç»„ã€‚å…·ä½“çš„æ¸…å•å’Œè§£é‡Šå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gupss3v7pdj60g30d9aav02.jpg" alt="image-20210922225731447"></p><h4 id="PCREæµæ´¾"><a href="#PCREæµæ´¾" class="headerlink" title="PCREæµæ´¾"></a>PCREæµæ´¾</h4><p>é™¤äº† POSIX æ ‡å‡†å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª Perl åˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨ç†ŸçŸ¥çš„ PCREã€‚éšç€ Perl è¯­è¨€çš„å‘å±•ï¼ŒPerl è¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½è¶Šæ¥è¶Šå¼ºæ‚ï¼Œä¸ºäº†æŠŠ Perl è¯­è¨€ä¸­æ­£åˆ™çš„åŠŸèƒ½ç§»æ¤åˆ°å…¶ä»–è¯­è¨€ä¸­ï¼ŒPCRE å°±è¯ç”Ÿäº†ã€‚ç›®å‰å¤§éƒ¨åˆ†å¸¸ç”¨ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯æºäº PCRE æ ‡å‡†ï¼Œè¿™ä¸ªæµæ´¾æ˜¾è‘—ç‰¹å¾æ˜¯æœ‰\dã€\wã€\s è¿™ç±»å­—ç¬¦ç»„ç®€è®°æ–¹å¼ã€‚</p><p><strong>PCREæµæ´¾çš„å…¼å®¹é—®é¢˜</strong></p><p>è™½ç„¶ PCRE æµæ´¾æ˜¯ä¸ Perl æ­£åˆ™è¡¨è¾¾å¼ç›¸å…¼å®¹çš„æµæ´¾ï¼Œä½†è¿™ç§å…¼å®¹åœ¨å„ç§è¯­è¨€å’Œå·¥å…·ä¸­è¿˜å­˜åœ¨ç¨‹åº¦ä¸Šçš„å·®åˆ«ï¼Œè¿™åŒ…æ‹¬äº†ç›´æ¥å…¼å®¹ä¸é—´æ¥å…¼å®¹ä¸¤ç§æƒ…å†µã€‚è€Œä¸”ï¼Œå³ä¾¿æ˜¯ç›´æ¥å…¼å®¹ï¼Œä¹Ÿå¹¶éå®Œå…¨å…¼å®¹ï¼Œè¿˜æ˜¯å­˜åœ¨éƒ¨åˆ†ä¸å…¼å®¹çš„æƒ…å†µã€‚åŸå› ä¹Ÿå¾ˆç®€å•ï¼ŒPerl è¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åœ¨ä¸æ–­æ”¹è¿›å’Œå‡çº§ä¹‹ä¸­ï¼Œå…¶ä»–è¯­è¨€å’Œå·¥å…·ä¸å¯èƒ½å®Œå…¨åšåˆ°å®æ—¶è·Ÿè¿›ä¸æ›´æ–°ã€‚</p><ul><li>ç›´æ¥å…¼å®¹, PCRE æµæ´¾ä¸­ä¸ Perl æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥å…¼å®¹çš„è¯­è¨€æˆ–å·¥å…·ã€‚æ¯”å¦‚ Perlã€PHP pregã€PCRE åº“ç­‰ï¼Œä¸€èˆ¬ç§°ä¹‹ä¸º Perl ç³»ã€‚</li><li>é—´æ¥å…¼å®¹ï¼Œæ¯”å¦‚ Java ç³»ï¼ˆåŒ…æ‹¬ Javaã€Groovyã€Scala ç­‰ï¼‰ã€Python ç³»ï¼ˆåŒ…æ‹¬ Python2 å’Œ Python3ï¼‰ã€JavaScript ç³»ï¼ˆåŒ…æ‹¬åŸç”Ÿ JavaScript å’Œæ‰©å±•åº“ XRegExpï¼‰ã€.Net ç³»ï¼ˆåŒ…æ‹¬ C#ã€VB.Net ç­‰ï¼‰ç­‰ã€‚</li></ul><p><strong>åœ¨Linuxä¸­ä½¿ç”¨æ­£åˆ™</strong></p><p>åœ¨éµå¾ª POSIX è§„èŒƒçš„ UNIX/LINUX ç³»ç»Ÿä¸Šï¼ŒæŒ‰ç…§ BRE æ ‡å‡† å®ç°çš„æœ‰ grepã€sed å’Œ vi/vim ç­‰ï¼Œè€ŒæŒ‰ç…§ ERE æ ‡å‡† å®ç°çš„æœ‰ egrepã€awk ç­‰ã€‚</p><p><strong>PCRE æµæ´¾ä¸ POSIX æµæ´¾çš„å¯¹æ¯”</strong></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gupt1qh20kj60j50b9gm502.jpg" alt="image-20210922230646487"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä½¿ç”¨ ERE æ ‡å‡†</span><br><span class="line">grep -E &#x27;[[:digit:]]+&#x27; access.log</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨ PCRE æ ‡å‡†</span><br><span class="line">grep -P &#x27;\d+&#x27; access.log</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ­£åˆ™å¤„ç†Unicode"><a href="#æ­£åˆ™å¤„ç†Unicode" class="headerlink" title="æ­£åˆ™å¤„ç†Unicode"></a>æ­£åˆ™å¤„ç†Unicode</h3><p>â€‹    </p><h4 id="UnicodeåŸºç¡€çŸ¥è¯†"><a href="#UnicodeåŸºç¡€çŸ¥è¯†" class="headerlink" title="UnicodeåŸºç¡€çŸ¥è¯†"></a>UnicodeåŸºç¡€çŸ¥è¯†</h4><p>Unicodeï¼ˆä¸­æ–‡ï¼šä¸‡å›½ç ã€å›½é™…ç ã€ç»Ÿä¸€ç ã€å•ä¸€ç ï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†ã€‚å®ƒå¯¹ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†çš„æ–‡å­—è¿›è¡Œäº†æ•´ç†ã€ç¼–ç ã€‚Unicode ä½¿è®¡ç®—æœºå‘ˆç°å’Œå¤„ç†æ–‡å­—å˜å¾—ç®€å•ã€‚</p><p>ç°åœ¨çš„ Unicode å­—ç¬¦åˆ†ä¸º 17 ç»„ç¼–æ’ï¼Œæ¯ç»„ä¸ºä¸€ä¸ªå¹³é¢ï¼ˆPlaneï¼‰ï¼Œè€Œæ¯ä¸ªå¹³é¢æ‹¥æœ‰ 65536ï¼ˆå³ 2 çš„ 16 æ¬¡æ–¹ï¼‰ä¸ªç å€¼ï¼ˆCode Pointï¼‰ã€‚ç„¶è€Œï¼Œç›®å‰ Unicode åªç”¨äº†å°‘æ•°å¹³é¢ï¼Œæˆ‘ä»¬ç”¨åˆ°çš„ç»å¤§å¤šæ•°å­—ç¬¦éƒ½å±äºç¬¬ 0 å·å¹³é¢ï¼Œå³ BMP å¹³é¢ã€‚é™¤äº† BMP å¹³é¢ä¹‹å¤–ï¼Œå…¶å®ƒçš„å¹³é¢éƒ½è¢«ç§°ä¸ºè¡¥å……å¹³é¢ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1guptmnvi8yj61c30j0gqa02.jpg" alt="image-20210922232653128"></p><p>Unicode ç›¸å½“äºè§„å®šäº†å­—ç¬¦å¯¹åº”çš„ç å€¼ï¼Œè¿™ä¸ªç å€¼å¾—ç¼–ç æˆå­—èŠ‚çš„å½¢å¼å»ä¼ è¾“å’Œå­˜å‚¨ã€‚æœ€å¸¸è§çš„ç¼–ç æ–¹å¼æ˜¯ UTF-8ï¼Œå¦å¤–è¿˜æœ‰ UTF-16ï¼ŒUTF-32 ç­‰ã€‚UTF-8 ä¹‹æ‰€ä»¥èƒ½å¤Ÿæµè¡Œèµ·æ¥ï¼Œæ˜¯å› ä¸ºå…¶ç¼–ç æ¯”è¾ƒå·§å¦™ï¼Œé‡‡ç”¨çš„æ˜¯å˜é•¿çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ª Unicode å­—ç¬¦ï¼Œåœ¨ä½¿ç”¨ UTF-8 ç¼–ç è¡¨ç¤ºæ—¶å ç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚ä¸ç­‰ã€‚æœ€é‡è¦çš„æ˜¯ Unicode å…¼å®¹ ASCII ç¼–ç ï¼Œåœ¨è¡¨ç¤ºçº¯è‹±æ–‡æ—¶ï¼Œå¹¶ä¸ä¼šå ç”¨æ›´å¤šå­˜å‚¨ç©ºé—´ã€‚è€Œæ±‰å­—å‘¢ï¼Œåœ¨ UTF-8 ä¸­ï¼Œé€šå¸¸æ˜¯ç”¨ä¸‰ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚</p><h3 id="å¦‚ä½•ç†è§£æ­£åˆ™çš„åŒ¹é…åŸç†ä»¥åŠä¼˜åŒ–åŸåˆ™"><a href="#å¦‚ä½•ç†è§£æ­£åˆ™çš„åŒ¹é…åŸç†ä»¥åŠä¼˜åŒ–åŸåˆ™" class="headerlink" title="å¦‚ä½•ç†è§£æ­£åˆ™çš„åŒ¹é…åŸç†ä»¥åŠä¼˜åŒ–åŸåˆ™"></a>å¦‚ä½•ç†è§£æ­£åˆ™çš„åŒ¹é…åŸç†ä»¥åŠä¼˜åŒ–åŸåˆ™</h3><h4 id="æœ‰ç©·çŠ¶æ€è‡ªåŠ¨æœº"><a href="#æœ‰ç©·çŠ¶æ€è‡ªåŠ¨æœº" class="headerlink" title="æœ‰ç©·çŠ¶æ€è‡ªåŠ¨æœº"></a>æœ‰ç©·çŠ¶æ€è‡ªåŠ¨æœº</h4><p>æ­£åˆ™ä¹‹æ‰€ä»¥èƒ½å¤Ÿå¤„ç†å¤æ‚æ–‡æœ¬ï¼Œå°±æ˜¯å› ä¸ºé‡‡ç”¨äº†æœ‰ç©·çŠ¶æ€è‡ªåŠ¨æœºï¼ˆfinite automatonï¼‰ã€‚é‚£ä»€ä¹ˆæ˜¯æœ‰ç©·è‡ªåŠ¨æœºå‘¢ï¼Ÿæœ‰ç©·çŠ¶æ€æ˜¯æŒ‡ä¸€ä¸ªç³»ç»Ÿå…·æœ‰æœ‰ç©·ä¸ªçŠ¶æ€ï¼Œä¸åŒçš„çŠ¶æ€ä»£è¡¨ä¸åŒçš„æ„ä¹‰ã€‚è‡ªåŠ¨æœºæ˜¯æŒ‡ç³»ç»Ÿå¯ä»¥æ ¹æ®ç›¸åº”çš„æ¡ä»¶ï¼Œåœ¨ä¸åŒçš„çŠ¶æ€ä¸‹è¿›è¡Œè½¬ç§»ã€‚ä»ä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼Œæ ¹æ®å¯¹åº”çš„æ“ä½œï¼ˆæ¯”å¦‚å½•å…¥çš„å­—ç¬¦é›†ï¼‰æ‰§è¡ŒçŠ¶æ€è½¬ç§»ï¼Œæœ€ç»ˆè¾¾åˆ°ç»ˆæ­¢çŠ¶æ€ï¼ˆå¯èƒ½æœ‰ä¸€åˆ°å¤šä¸ªç»ˆæ­¢çŠ¶æ€ï¼‰ã€‚æœ‰ç©·è‡ªåŠ¨æœºçš„å…·ä½“å®ç°ç§°ä¸ºæ­£åˆ™å¼•æ“ï¼Œä¸»è¦æœ‰ DFA å’Œ NFA ä¸¤ç§ï¼Œå…¶ä¸­ NFA åˆåˆ†ä¸ºä¼ ç»Ÿçš„ NFA å’Œ POSIX NFAã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1guomw61kmcj60g405nmxd02.jpg" alt="image-20210921224812714"></p><ul><li>ç¡®å®šå‹ä¸éç¡®å®šå‹ï¼Œåœ¨æ²¡æœ‰ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ï¼Œå°±å¯ä»¥ç›´æ¥ç¡®å®šå­—ç¬¦åŒ¹é…é¡ºåºçš„å°±æ˜¯ç¡®å®šå‹ï¼Œä¸èƒ½ç¡®å®šå­—ç¬¦åŒ¹é…é¡ºåºçš„åˆ™ä¸ºéç¡®å®šå‹</li><li>æœ‰ç©·: æœ‰ç©·å³è¡¨ç¤ºæœ‰é™çš„æ„æ€ï¼Œæœ‰é™æ¬¡æ•°èƒ½å¾—åˆ°ç»“æœ</li><li>è‡ªåŠ¨æœº: è‡ªåŠ¨æœºä¾¿æ˜¯è‡ªåŠ¨å®Œæˆï¼Œåœ¨æˆ‘ä»¬è®¾ç½®å¥½åŒ¹é…è§„åˆ™åç”±å¼•æ“è‡ªåŠ¨å®Œæˆã€‚</li></ul><p> <strong>NFA</strong></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1guomysvwpfj60h2049dfu02.jpg" alt="image-20210921225047806"></p><p>åœ¨çŠ¶æ€ s3 æ—¶ï¼Œä¸éœ€è¦è¾“å…¥ä»»ä½•å­—ç¬¦ï¼ŒçŠ¶æ€ä¹Ÿæœ‰å¯èƒ½è½¬æ¢æˆ s1ã€‚ä½ å¯ä»¥ç†è§£æˆ a(bb)+a åœ¨åŒ¹é…äº†å­—ç¬¦ abb ä¹‹åï¼Œåˆ°åº•åœ¨ s3 çŠ¶æ€ï¼Œè¿˜æ˜¯åœ¨ s1 çŠ¶æ€ï¼Œè¿™æ˜¯ä¸ç¡®å®šçš„ã€‚è¿™ç§çŠ¶æ€æœºå°±æ˜¯éç¡®å®šæ€§æœ‰ç©·çŠ¶æ€è‡ªåŠ¨æœºï¼ˆNon-deterministic finite automaton ç®€ç§° NFAï¼‰ã€‚</p><p><strong>DFA</strong></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1guon29bwt6j60i505maa302.jpg" alt="image-20210921225406729"></p><p>NFA å’Œ DFA æ˜¯å¯ä»¥ç›¸äº’è½¬åŒ–çš„ï¼Œå½“æˆ‘ä»¬æŠŠä¸Šé¢çš„çŠ¶æ€è¡¨ç¤ºæˆä¸‹é¢è¿™æ ·ï¼Œå°±æ˜¯ä¸€å° DFA çŠ¶æ€æœºäº†ï¼Œå› ä¸ºåœ¨ s0-s4 è¿™å‡ ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½éœ€è¦ç‰¹å®šçš„è¾“å…¥ï¼Œæ‰èƒ½å‘ç”ŸçŠ¶æ€å˜åŒ–ã€‚</p><p><strong>POSIX NFA</strong></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1guqzkmbsbrj60fj08owem02.jpg" alt="image-20210923233802835"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºä½¿ç”¨ï¼Œä½¿ç”¨æ­£åˆ™ pos|posix åœ¨æ–‡æœ¬ posix ä¸­è¿›è¡ŒåŒ¹é…ï¼Œä¼ ç»Ÿçš„ NFA ä»æ–‡æœ¬ä¸­æ‰¾åˆ°çš„æ˜¯ posï¼Œè€Œä¸æ˜¯ posixï¼Œè€Œ POSIX NFA æ‰¾åˆ°çš„æ˜¯ posixã€‚POSIX NFA å¼•æ“ä¸ä¼ ç»Ÿçš„ NFA å¼•æ“ç±»ä¼¼ï¼Œä½†ä¸åŒä¹‹å¤„åœ¨äºï¼ŒPOSIX NFA åœ¨æ‰¾åˆ°å¯èƒ½çš„æœ€é•¿åŒ¹é…ä¹‹å‰ä¼šç»§ç»­å›æº¯ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šå°½å¯èƒ½æ‰¾æœ€é•¿çš„ï¼Œå¦‚æœåˆ†æ”¯ä¸€æ ·é•¿ï¼Œä»¥æœ€å·¦è¾¹çš„ä¸ºå‡†ï¼ˆâ€œThe Longest-Leftmostâ€ï¼‰</p><h4 id="NFAå·¥ä½œæœºåˆ¶"><a href="#NFAå·¥ä½œæœºåˆ¶" class="headerlink" title="NFAå·¥ä½œæœºåˆ¶"></a><strong>NFAå·¥ä½œæœºåˆ¶</strong></h4><p>NFA æ˜¯ä»¥æ­£åˆ™ä¸ºä¸»å¯¼ï¼Œåå¤æµ‹è¯•å­—ç¬¦ä¸²ï¼Œè¿™æ ·å­—ç¬¦ä¸²ä¸­åŒä¸€éƒ¨åˆ†ï¼Œæœ‰å¯èƒ½è¢«åå¤æµ‹è¯•å¾ˆå¤šæ¬¡</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">text: We study hdreact</span><br><span class="line">regex: hd(vue|react|regex)</span><br></pre></td></tr></table></figure><p>NFA å¼•æ“çš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œå…ˆçœ‹æ­£åˆ™ï¼Œå†çœ‹æ–‡æœ¬ï¼Œè€Œä¸”ä»¥æ­£åˆ™ä¸ºä¸»å¯¼ã€‚æ­£åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ hï¼ŒNFA å¼•æ“åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ hï¼Œæ¥ç€åŒ¹é…å…¶åæ˜¯å¦ä¸º dã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text: We study hdreact</span><br><span class="line">                  ^</span><br><span class="line"></span><br><span class="line">regex: hd(vue|react|regex)</span><br><span class="line">          ^</span><br></pre></td></tr></table></figure><p>å†æ ¹æ®æ­£åˆ™çœ‹æ–‡æœ¬åé¢çš„æ˜¯ä¸æ˜¯v,å‘ç°ä¸æ˜¯ï¼Œæ­¤æ—¶vueåˆ†æ”¯æ·˜æ±°ï¼Œ</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text: We study hdreact</span><br><span class="line">                  <span class="built_in">^</span></span><br><span class="line"></span><br><span class="line">regex: hd(vue|react|regex)</span><br><span class="line">          <span class="built_in">^</span>        </span><br></pre></td></tr></table></figure><p>æ¥ç€çœ‹ç¬¬äºŒä¸ªåˆ†æ”¯ï¼Œå‘ç°åŒ¹é…ä¸Šäº†ã€‚æ•´ä¸ªæ–‡æœ¬åŒ¹é…å®Œæ¯•ï¼Œä¹Ÿå°±ä¸ä¼šå»çœ‹åé¢çš„regexåˆ†æ”¯äº†ã€‚å¦‚æœæ­£åˆ™è¡¨è¾¾å¼æ”¹æˆhd(vue|regex|react)</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">text: We study hdreact</span><br><span class="line">                  <span class="built_in">^</span></span><br><span class="line">regex: hd(vue|regex|react)</span><br><span class="line">  <span class="built_in">^</span></span><br></pre></td></tr></table></figure><p>å½“æ­£åˆ™regexä¸­gåŒ¹é…ä¸ä¸Šreactä¸­açš„æ—¶å€™ä¼šæ¥ç€ç”¨ç¬¬ä¸‰ä¸ªåˆ†æ”¯reactæ¥åŒ¹é…,å¹¶ä¸”é‡æ–°ä»rå¼€å§‹</p><p><strong>ç‰¹ç‚¹</strong></p><ol><li>æ­£åˆ™è¡¨è¾¾å¼ä¸»å¯¼: æŒ‰ç…§è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†æ‰§è¡Œï¼Œå¦‚æœä¸åŒ¹é…æ¢å…¶ä»–éƒ¨åˆ†ç»§ç»­åŒ¹é…ï¼Œç›´åˆ°è¡¨è¾¾å¼åŒ¹é…å®Œæˆ</li><li>ä¼šå‘ç”Ÿå›æº¯ï¼Œå­—ç¬¦ä¸²ä¸­åŒä¸€éƒ¨åˆ†å¯èƒ½ä¼šå¯¹æ¯”å¾ˆå¤šæ¬¡</li><li>æ”¯æŒå­ç»„å’Œåå‘å¼•ç”¨</li></ol><h4 id="DFAå·¥ä½œæœºåˆ¶"><a href="#DFAå·¥ä½œæœºåˆ¶" class="headerlink" title="DFAå·¥ä½œæœºåˆ¶"></a><strong>DFAå·¥ä½œæœºåˆ¶</strong></h4><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text: We study hdreact</span><br><span class="line"></span><br><span class="line">regex: hd(vue|react|regex)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>DFA ä¼šå…ˆçœ‹æ–‡æœ¬ï¼Œå†çœ‹æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ˜¯ä»¥æ–‡æœ¬ä¸ºä¸»å¯¼çš„ã€‚åœ¨å…·ä½“åŒ¹é…è¿‡ç¨‹ä¸­ï¼ŒDFA ä¼šä» We ä¸­çš„ w å¼€å§‹ä¾æ¬¡æŸ¥æ‰¾ hï¼Œå®šä½åˆ° h ï¼Œè¿™ä¸ªå­—ç¬¦åé¢æ˜¯ dã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ç€çœ‹æ­£åˆ™éƒ¨åˆ†æ˜¯å¦æœ‰ d ï¼Œå¦‚æœæ­£åˆ™åé¢æ˜¯ä¸ª d ï¼Œdåé¢çš„æ˜¯rï¼ŒDFAæ¥ç€çœ‹æ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†ï¼Œæ­¤æ—¶zhushouåˆ†æ”¯è¢«æ·˜æ±°ï¼Œå¼€å¤´æ˜¯rçš„react regexç¬¦åˆè¦æ±‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text: We study hdreact</span><br><span class="line"></span><br><span class="line">regex: hd(vue|react|regex)</span><br><span class="line">^^^</span><br><span class="line"> æ·˜æ±° ç¬¦åˆç¬¦åˆ</span><br></pre></td></tr></table></figure><p>ç»§ç»­çœ‹åé¢çš„å­—ç¬¦ä¸²eå’Œæ­£åˆ™æ¯”è¾ƒï¼Œç¬¦åˆè¦æ±‚ï¼Œç„¶åçœ‹a ï¼Œæ·˜æ±°regexåˆ†æ”¯ï¼Œreactåˆ†æ”¯ç¬¦åˆè¦æ±‚ã€‚æ¥ç€çœ‹actï¼Œå’Œæ­£åˆ™æ¯”è¾ƒç¬¦åˆè¦æ±‚ã€‚åŒ¹é…æˆåŠŸã€‚</p><p><strong>ç‰¹ç‚¹</strong></p><ol><li>æ–‡æœ¬ä¸»å¯¼: æŒ‰ç…§æ–‡æœ¬çš„é¡ºåºæ‰§è¡Œã€‚</li><li>è®°å½•å½“å‰æœ‰æ•ˆçš„æ‰€æœ‰å¯èƒ½: å½“æ‰§è¡Œ(zhushou|shijian|shixi)æ—¶ï¼ŒåŒæ—¶æ¯”è¾ƒzhushou shijian shixi æ—¶éœ€è¦æ›´å¤šçš„å†…å­˜</li><li>æ¯ä¸ªå­—ç¬¦åªæ£€æŸ¥ä¸€æ¬¡: æé«˜äº†æ‰§è¡Œæ•ˆç‡</li><li>ä¸èƒ½ä½¿ç”¨åå‘å¼•ç”¨ï¼Œæ•è·å­ç»„ç­‰åŠŸèƒ½</li><li>æ— æ³•å›æº¯</li></ol><p>å…¼å®¹æ€§</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1guooynsuytj60hb071jrq02.jpg" alt="image-20210921235951589"></p><p>ä¼˜åŒ–åŸåˆ™</p><ul><li>æå‰ç¼–è¯‘å¥½æ­£åˆ™</li><li>æå–å‡ºå…¬å…±éƒ¨åˆ†</li><li>å°½é‡å‡†ç¡®åœ°è¡¨ç¤ºèŒƒå›´</li><li>å¿…è¦æ—¶æ‰ä½¿ç”¨å­ç»„ç­‰</li><li>æµ‹è¯•æ­£åˆ™æ€§èƒ½ï¼Œä½¿ç”¨ipythonæˆ–regex101ç­‰</li><li>å‡ºç°å¯èƒ½æ€§å¤§çš„æ”¾å·¦è¾¹</li><li>é¿å…ä¸åŒåˆ†æ”¯é‡å¤åŒ¹é…</li></ul><h3 id="æ­£åˆ™ç½‘ç«™orè½¯ä»¶"><a href="#æ­£åˆ™ç½‘ç«™orè½¯ä»¶" class="headerlink" title="æ­£åˆ™ç½‘ç«™orè½¯ä»¶"></a>æ­£åˆ™ç½‘ç«™orè½¯ä»¶</h3><ol><li> <a href="https://regex101.com/">https://regex101.com/</a> </li><li> <a href="https://tool.oschina.net/regex/">https://tool.oschina.net/regex/</a></li><li> <a href="http://tool.chinaz.com/regex/">http://tool.chinaz.com/regex/</a></li><li> <a href="https://www.w3cschool.cn/tools/index?name=re">https://www.w3cschool.cn/tools/index?name=re</a></li><li> <a href="https://c.runoob.com/front-end/854">https://c.runoob.com/front-end/854</a></li><li> <a href="http://tools.haokh.net/Regex">http://tools.haokh.net/Regex</a></li><li> Windows ä¸Šæ¨èï¼šRegexBuddy</li><li> Macä¸Šæ¨èï¼šExpressions</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h3&gt;&lt;p&gt;åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ­£åˆ™å¸¸å¸¸ç”¨æ¥ç®€åŒ–æ–‡æœ¬å¤„ç†çš„é€»è¾‘ã€‚åœ¨ Linux å‘½ä»¤ä¸­ï¼Œå®ƒä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬è½»æ¾åœ°æŸ¥æ‰¾æˆ–ç¼–è¾‘æ–‡ä»¶çš„å†…å®¹ï¼Œç”šè‡³å®ç°æ•´ä¸ªæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰æ–‡</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>test</title>
    <link href="http://example.com/2021/08/25/index/"/>
    <id>http://example.com/2021/08/25/index/</id>
    <published>2021-08-25T15:36:11.000Z</published>
    <updated>2021-11-08T16:15:04.548Z</updated>
    
    <content type="html"><![CDATA[<div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><a class="btn-beautify button--animated larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify button--animated blue larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify button--animated pink larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify button--animated red larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify button--animated purple larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify button--animated orange larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify button--animated green larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><div class="note flat"><p>é»˜èª æç¤ºå¡Šæ¨™ç±¤</p></div><div class="note default flat"><p>default æç¤ºå¡Šæ¨™ç±¤</p></div><div class="note primary flat"><p>primary æç¤ºå¡Šæ¨™ç±¤</p></div><div class="note success flat"><p>success æç¤ºå¡Šæ¨™ç±¤</p></div><div class="note info flat"><p>info æç¤ºå¡Šæ¨™ç±¤</p></div><div class="note warning flat"><p>warning æç¤ºå¡Šæ¨™ç±¤</p></div><div class="note danger flat"><p>danger æç¤ºå¡Šæ¨™ç±¤</p></div><div class="mermaid">pie    title Key elements in Product X    &quot;Calcium&quot; : 42.96    &quot;Potassium&quot; : 50.05    &quot;Magnesium&quot; : 10.01    &quot;Iron&quot; :  5</div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;tabs&quot; id=&quot;test1&quot;&gt;&lt;ul class=&quot;nav-tabs&quot;&gt;&lt;li class=&quot;tab active&quot;&gt;&lt;button type=&quot;button&quot; data-href=&quot;#test1-1&quot;&gt;test1 1&lt;/button&gt;&lt;/li&gt;&lt;li</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ä½ ä¸äº†è§£çš„js</title>
    <link href="http://example.com/2021/08/20/%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84js/"/>
    <id>http://example.com/2021/08/20/%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84js/</id>
    <published>2021-08-20T00:00:00.000Z</published>
    <updated>2021-11-08T16:15:04.548Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ test</p><h3 id="ä¸»é¢˜ä¸€"><a href="#ä¸»é¢˜ä¸€" class="headerlink" title="ä¸»é¢˜ä¸€"></a>ä¸»é¢˜ä¸€</h3><p>ä¸»é¢˜ä¸€å†…å®¹</p><h3 id="ä¸»é¢˜äºŒ"><a href="#ä¸»é¢˜äºŒ" class="headerlink" title="ä¸»é¢˜äºŒ"></a>ä¸»é¢˜äºŒ</h3><p>ä¸»é¢˜äºŒå†…å®¹</p><h3 id="ä¸»é¢˜ä¸‰"><a href="#ä¸»é¢˜ä¸‰" class="headerlink" title="ä¸»é¢˜ä¸‰"></a>ä¸»é¢˜ä¸‰</h3><p>ä¸»é¢˜ä¸‰å†…å®¹</p><h3 id="ä¸»é¢˜å››"><a href="#ä¸»é¢˜å››" class="headerlink" title="ä¸»é¢˜å››"></a>ä¸»é¢˜å››</h3><p>ä¸»é¢˜å››å†…å®¹</p><h3 id="ä¸»é¢˜äº”"><a href="#ä¸»é¢˜äº”" class="headerlink" title="ä¸»é¢˜äº”"></a>ä¸»é¢˜äº”</h3><p>ä¸»é¢˜äº”å†…å®¹</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä½¿ç”¨ test&lt;/p&gt;
&lt;h3 id=&quot;ä¸»é¢˜ä¸€&quot;&gt;&lt;a href=&quot;#ä¸»é¢˜ä¸€&quot; class=&quot;headerlink&quot; title=&quot;ä¸»é¢˜ä¸€&quot;&gt;&lt;/a&gt;ä¸»é¢˜ä¸€&lt;/h3&gt;&lt;p&gt;ä¸»é¢˜ä¸€å†…å®¹&lt;/p&gt;
&lt;h3 id=&quot;ä¸»é¢˜äºŒ&quot;&gt;&lt;a href=&quot;#ä¸»é¢˜äºŒ&quot; class=&quot;header</summary>
      
    
    
    
    
  </entry>
  
</feed>
